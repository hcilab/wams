{"mappings":"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","sources":["node_modules/socket.io-client/lib/index.js","node_modules/socket.io-client/lib/url.js","node_modules/parseuri/index.js","node_modules/socket.io-client/node_modules/debug/src/browser.js","node_modules/process/browser.js","node_modules/socket.io-client/node_modules/debug/src/debug.js","node_modules/socket.io-client/node_modules/ms/index.js","node_modules/socket.io-client/node_modules/socket.io-parser/index.js","node_modules/component-emitter/index.js","node_modules/socket.io-client/node_modules/socket.io-parser/binary.js","node_modules/isarray/index.js","node_modules/socket.io-client/node_modules/socket.io-parser/is-buffer.js","node_modules/buffer/index.js","node_modules/base64-js/index.js","node_modules/ieee754/index.js","node_modules/socket.io-client/lib/manager.js","node_modules/engine.io-client/lib/index.js","node_modules/engine.io-client/lib/socket.js","node_modules/engine.io-client/lib/transports/index.js","node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","node_modules/has-cors/index.js","node_modules/engine.io-client/lib/globalThis.browser.js","node_modules/engine.io-client/lib/transports/polling-xhr.js","node_modules/engine.io-client/lib/transports/polling.js","node_modules/engine.io-client/lib/transport.js","node_modules/engine.io-parser/lib/browser.js","node_modules/engine.io-parser/lib/keys.js","node_modules/has-binary2/index.js","node_modules/arraybuffer.slice/index.js","node_modules/after/index.js","node_modules/engine.io-parser/lib/utf8.js","node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","node_modules/blob/index.js","node_modules/parseqs/index.js","node_modules/component-inherit/index.js","node_modules/yeast/index.js","node_modules/engine.io-client/node_modules/debug/src/browser.js","node_modules/engine.io-client/node_modules/debug/src/debug.js","node_modules/engine.io-client/node_modules/ms/index.js","node_modules/engine.io-client/lib/transports/polling-jsonp.js","node_modules/engine.io-client/lib/transports/websocket.js","node_modules/indexof/index.js","node_modules/socket.io-client/lib/socket.js","node_modules/to-array/index.js","node_modules/socket.io-client/lib/on.js","node_modules/component-bind/index.js","node_modules/backo2/index.js","src/shared/utilities.js","src/shared/IdStamper.js","src/shared/Message.js","src/shared/Reporters.js","src/shared/ReporterFactory.js","src/shared/Point2D.js","src/shared/Polygon2D.js","src/shared/Rectangle.js","src/shared/Circle.js","src/shared.js","src/client/ClientController.js","node_modules/westures/dist/core/dist/src/Gesture.js","node_modules/westures/dist/core/dist/src/Point2D.js","node_modules/westures/dist/core/dist/src/constants.js","node_modules/westures/dist/core/dist/src/PointerData.js","node_modules/westures/dist/core/dist/src/utils.js","node_modules/westures/dist/core/dist/src/Input.js","node_modules/westures/dist/core/dist/src/State.js","node_modules/westures/dist/core/dist/src/Region.js","node_modules/westures/dist/core/dist/src/Smoothable.js","node_modules/westures/dist/src/Pan.js","node_modules/westures/dist/core/dist/index.js","node_modules/westures/dist/src/Pinch.js","node_modules/westures/dist/src/Press.js","node_modules/westures/dist/src/Pull.js","node_modules/westures/dist/src/Pivotable.js","node_modules/westures/dist/src/Rotate.js","node_modules/westures/dist/src/Swipe.js","node_modules/westures/dist/src/Swivel.js","node_modules/westures/dist/src/Tap.js","node_modules/westures/dist/src/Track.js","node_modules/westures/dist/index.js","src/client/Interactor.js","src/client/ClientElement.js","src/client/ClientImage.js","src/client/ClientItem.js","node_modules/canvas-sequencer/dist/src/CanvasAtom.js","node_modules/canvas-sequencer/dist/src/CanvasSequence.js","node_modules/canvas-sequencer/dist/src/CanvasBlueprint.js","node_modules/canvas-sequencer/dist/index.js","src/client/ShadowView.js","src/client/ClientModel.js","src/client/ClientView.js","src/client.js"],"sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emitBuffered();\n  this.emit('connect');\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","'use strict';\n\n/**\n * @namespace utilities\n * @memberof module:shared\n */\n\n/**\n * Defines the given property on the given object with the given value, and sets\n * the property to unconfigurable, unwritable, but enumerable.\n *\n * @param {object} obj - The object on which the property will be defined.\n * @param {string} prop - The property to define on obj.\n * @param {any} val - The value to assign to the property.\n *\n * @memberof module:shared.utilities\n */\nfunction defineOwnImmutableEnumerableProperty(obj, prop, val) {\n  Object.defineProperty(obj, prop, {\n    value: val,\n    configurable: false,\n    enumerable: true,\n    writable: false,\n  });\n}\n\n/**\n * Plain, simple NOP definition. If there's a faster NOP, redefine it here.\n *\n * @memberof module:shared.utilities\n */\nconst NOP = () => {};\n\n/**\n * Removes the given item from the given array, according to its Id.\n *\n * @memberof module:shared.utilities\n *\n * @param {Object[]} array - The array to modify.\n * @param {Object} item  - The item to remove from array according to its Id.\n *\n * @return {boolean} True if the item was found and removed, false otherwise.\n */\nfunction removeById(array, item) {\n  const idx = array.findIndex((o) => o.id === item.id);\n  if (idx >= 0) {\n    array.splice(idx, 1);\n    return true;\n  }\n  return false;\n}\n\nmodule.exports = Object.freeze({\n  defineOwnImmutableEnumerableProperty,\n  NOP,\n  removeById,\n});\n","'use strict';\n\nconst { defineOwnImmutableEnumerableProperty } = require('./utilities.js');\n\n/**\n * Given a previous ID, returns the next unique ID in the sequence.\n *\n * @inner\n * @memberof module:shared.IdStamper\n * @throws Error\n *\n * @param {number} previous - The previously assigned unique ID.\n *\n * @returns {number} The next unique ID\n */\nfunction getUniqueId(previous) {\n  const next = previous + 1;\n  if (Number.isSafeInteger(next)) {\n    return next;\n  }\n  throw new Error('Ran out of unique IDs!');\n}\n\n// Mark these fields as intended for internal use.\nconst symbols = Object.freeze({\n  prevId: Symbol('prevId'),\n});\n\n/**\n * Class for stamping and cloning integer IDs. Stamped IDs are unique on a\n * per-IdStamper basis.\n *\n * @example\n * const stamper = new IdStamper();\n * const obj = {};\n * stamper.stampNewId(obj);\n * console.log(obj.id);  // an integer unique to Ids stamped by stamper\n * obj.id = 2;           // has no effect.\n * delete obj.id;        // false\n *\n * const danger = {};\n * IdStamper.cloneId(danger, obj.id); // Will work. 'danger' & 'obj' are\n *                                    // now both using the same Id.\n *\n * @memberof module:shared\n */\nclass IdStamper {\n  constructor() {\n    /**\n     * The value of the previously assigned ID.\n     *\n     * @type {number}\n     * @alias [@@prevId]\n     * @memberof module:shared.IdStamper\n     */\n    this[symbols.prevId] = 0;\n  }\n\n  /**\n   * Stamps an integer ID, unique to this IdStamper, onto the given object.\n   *\n   * All Ids produced by this method are guaranteed to be unique, on a\n   * per-stamper basis. (Two uniquely constructed stampers can and will generate\n   * identical Ids).\n   *\n   * @param {Object} obj - An object onto which an ID will be stamped.\n   */\n  stampNewId(obj) {\n    this[symbols.prevId] = getUniqueId(this[symbols.prevId]);\n    defineOwnImmutableEnumerableProperty(obj, 'id', this[symbols.prevId]);\n  }\n\n  /**\n   * Stamps a clone of the given ID onto the given object.\n   *\n   * @param {Object} obj - An object onto which an ID will be stamped.\n   * @param {number} id - The ID to clone onto obj.\n   */\n  static cloneId(obj, id) {\n    if (Number.isSafeInteger(id)) {\n      defineOwnImmutableEnumerableProperty(obj, 'id', id);\n    }\n  }\n}\n\nmodule.exports = IdStamper;\n","/*\n * Shared Message class for the WAMS application.\n *\n * Author: Michael van der Kamp\n * Date: July / August 2018\n *\n * The purpose of this class is to provide a funnel through which all messages\n * between client and server must pass. In concert with the Reporter interface,\n * it allows for a sanity check such that the correct sort of data is getting\n * passed back and forth.\n *\n * Unfortunately this does not provide a strict guarantee that informal and ad\n * hoc messages aren't getting emitted somewhere, so it is up to the programmer\n * to be disciplined and adhere to the Message / Reporter principle.\n */\n\n'use strict';\n\nconst { defineOwnImmutableEnumerableProperty } = require('./utilities.js');\n\n/**\n * TYPES is an explicit list of the types of messages that will be passed back\n * and forth. Messages not on this list should be ignored!\n *\n * @enum {string}\n * @readonly\n * @lends module:shared.Message\n */\nconst TYPES = {\n  // For the server to inform about changes to the model\n  /** @const */ ADD_ELEMENT: 'add-element',\n  /** @const */ ADD_IMAGE: 'add-image',\n  /** @const */ ADD_ITEM: 'add-item',\n  /** @const */ ADD_SHADOW: 'add-shadow',\n  /** @const */ ADD_GROUP: 'add-group',\n  /** @const */ RM_ITEM: 'remove-item',\n  /** @const */ RM_SHADOW: 'remove-shadow',\n  /** @const */ UD_ITEM: 'update-item',\n  /** @const */ UD_SHADOW: 'update-shadow',\n  /** @const */ UD_VIEW: 'update-view',\n\n  // For hopefully occasional extra adjustments to objects in the model.\n  /** @const */ RM_ATTRS: 'remove-attributes',\n  /** @const */ SET_ITEMS: 'set-items',\n  /** @const */ SET_ATTRS: 'set-attributes',\n  /** @const */ SET_IMAGE: 'set-image',\n  /** @const */ SET_RENDER: 'set-render',\n  /** @const */ SET_PARENT: 'set-parent',\n\n  // Connection establishment related (disconnect, initial setup)\n  /** @const */ INITIALIZE: 'initialize',\n  /** @const */ LAYOUT: 'layout',\n  /** @const */ FULL: 'full',\n\n  // User event related\n  /** @const */ CLICK: 'click',\n  /** @const */ RESIZE: 'resize',\n  /** @const */ SWIPE: 'swipe',\n  /** @const */ TRACK: 'track',\n  /** @const */ TRANSFORM: 'transform',\n\n  // Multi-device gesture related\n  /** @const */ POINTER: 'pointer',\n  /** @const */ BLUR: 'blur',\n\n  // Page event related\n  /** @const */ IMG_LOAD: 'image-loaded',\n\n  // User defined actions\n  /** @const */ DISPATCH: 'dispatch',\n};\nObject.freeze(TYPES);\n\nconst TYPE_VALUES = Object.freeze(Object.values(TYPES));\n\n/**\n * The Message class provides a funnel through which data passed between the\n * client and server must flow.\n *\n * If an invalid type is received, the constructor throws an exception. If an\n * invalid reporter is received, an exception will not be thrown until\n * 'emitWith()' is called.\n *\n * @memberof module:shared\n *\n * @throws TypeError\n *\n * @param {string} type - The message type. Must be one of the explicitly listed\n * message types available on the Message object.\n * @param {module:shared.Reporter} reporter - A Reporter instance, containing\n * the data to be emitted.\n */\nclass Message {\n  constructor(type, reporter) {\n    if (!TYPE_VALUES.includes(type)) {\n      throw new TypeError('Invalid message type!');\n    }\n\n    /**\n     * The type of Message. Must be one of the predefined types available as\n     * static fields on the Message class.\n     *\n     * @type {string}\n     */\n    this.type = type;\n\n    /**\n     * The Reporter which holds the data to send in the Message.\n     *\n     * @type {module:shared.Reporter}\n     */\n    this.reporter = reporter;\n  }\n\n  /**\n   * Emits the data contained in the reporter along the channel defined by\n   * emitter.\n   *\n   * @param {Emitter} emitter - An object capable of emitting data packets. Must\n   * have an 'emit()' function.\n   */\n  emitWith(emitter) {\n    emitter.emit(this.type, this.reporter.report());\n  }\n}\n\n/*\n * Only define the messages once, above, and now attach them to the Message\n * Class object for external reference.\n */\nObject.entries(TYPES).forEach(([p, v]) => {\n  defineOwnImmutableEnumerableProperty(Message, p, v);\n});\n\nmodule.exports = Message;\n","'use strict';\n\nconst ReporterFactory = require('./ReporterFactory.js');\n\n/**\n * This Item class provides a common interface between the client and the server\n * by which the Items can interact safely.\n *\n * @class Item\n * @memberof module:shared\n * @extends module:shared.Reporter\n */\nconst Item = ReporterFactory({\n  /**\n   * X coordinate of the Item.\n   *\n   * @name x\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.Item\n   * @instance\n   */\n  x: 0,\n\n  /**\n   * Y coordinate of the Item.\n   *\n   * @name y\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.Item\n   * @instance\n   */\n  y: 0,\n\n  /**\n   * Rotation of the Item.\n   *\n   * @name rotation\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.Item\n   * @instance\n   */\n  rotation: 0,\n\n  /**\n   * Scale of the Item.\n   *\n   * @name scale\n   * @type {number}\n   * @default 1\n   * @memberof module:shared.Item\n   * @instance\n   */\n  scale: 1,\n\n  /**\n   * Type description of the Item.\n   *\n   * @name type\n   * @type {string}\n   * @default 'item/polygonal'\n   * @memberof module:shared.Item\n   * @instance\n   */\n  type: 'item/polygonal',\n\n  /**\n   * Whether to raise item upon interaction or\n   * lock Z position instead.\n   *\n   * @name lockZ\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.Item\n   * @instance\n   */\n  lockZ: false,\n});\n\n/**\n * This WamsElement class provides a common interface between the client and the\n * server by which the elements interact safely.\n *\n * @class WamsElement\n * @memberof module:shared\n * @extends module:shared.Reporter\n */\nconst WamsElement = ReporterFactory({\n  /**\n   * X coordinate of the WamsElement.\n   *\n   * @name x\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  x: 0,\n\n  /**\n   * Y coordinate of the WamsElement.\n   *\n   * @name y\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  y: 0,\n\n  /**\n   * Width of the WamsElement.\n   *\n   * @name width\n   * @type {number}\n   * @default 400\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  width: 400,\n\n  /**\n   * Height of the WamsElement.\n   *\n   * @name height\n   * @type {number}\n   * @default 300\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  height: 300,\n\n  /**\n   * Rotation of the WamsElement.\n   *\n   * @name rotation\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  rotation: 0,\n\n  /**\n   * Scale of the WamsElement.\n   *\n   * @name scale\n   * @type {number}\n   * @default 1\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  scale: 1,\n\n  /**\n   * Type description of the WamsElement.\n   *\n   * @name type\n   * @type {string}\n   * @default 'item/element'\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  type: 'item/element',\n\n  /**\n   * Tag name of the WamsElement.\n   *\n   * @name tagname\n   * @type {string}\n   * @default 'div'\n   * @memberof module:shared.WamsElement\n   * @instance\n   */\n  tagname: 'div',\n\n  /**\n   * Whether to raise item upon interaction or\n   * lock Z position instead.\n   *\n   * @name lockZ\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.Item\n   * @instance\n   */\n  lockZ: false,\n});\n\n/**\n * This WamsImage class provides a common interface between the client and the\n * server by which the images can interact safely.\n *\n * @class WamsImage\n * @memberof module:shared\n * @extends module:shared.Reporter\n */\nconst WamsImage = ReporterFactory({\n  /**\n   * X coordinate of the WamsImage.\n   *\n   * @name x\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  x: 0,\n\n  /**\n   * Y coordinate of the WamsImage.\n   *\n   * @name y\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  y: 0,\n\n  /**\n   * Width of the WamsImage.\n   *\n   * @name width\n   * @type {number}\n   * @default 400\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  width: 400,\n\n  /**\n   * Height of the WamsImage.\n   *\n   * @name height\n   * @type {number}\n   * @default 300\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  height: 300,\n\n  /**\n   * Rotation of the WamsImage.\n   *\n   * @name rotation\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  rotation: 0,\n\n  /**\n   * Scale of the WamsImage.\n   *\n   * @name scale\n   * @type {number}\n   * @default 1\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  scale: 1,\n\n  /**\n   * Type description of the WamsImage.\n   *\n   * @name type\n   * @type {string}\n   * @default 'item/image'\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  type: 'item/image',\n\n  /**\n   * Whether to raise image upon interaction or\n   * lock Z position instead.\n   *\n   * @name lockZ\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.WamsImage\n   * @instance\n   */\n  lockZ: false,\n});\n\n/**\n * This View class provides a common interface between the client and\n * the server by which the Views can interact safely.\n *\n * @class View\n * @memberof module:shared\n * @extends module:shared.Reporter\n */\nconst View = ReporterFactory({\n  /**\n   * X coordinate of the View.\n   *\n   * @name x\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.View\n   * @instance\n   */\n  x: 0,\n\n  /**\n   * Y coordinate of the View.\n   *\n   * @name y\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.View\n   * @instance\n   */\n  y: 0,\n\n  /**\n   * Width of the View.\n   *\n   * @name width\n   * @type {number}\n   * @default 1600\n   * @memberof module:shared.View\n   * @instance\n   */\n  width: 1600,\n\n  /**\n   * Height of the View.\n   *\n   * @name height\n   * @type {number}\n   * @default 900\n   * @memberof module:shared.View\n   * @instance\n   */\n  height: 900,\n\n  /**\n   * Type of object.\n   *\n   * @name type\n   * @type {string}\n   * @default 'view/background'\n   * @memberof module:shared.View\n   * @instance\n   */\n  type: 'view/background',\n\n  /**\n   * Scale of the View.\n   *\n   * @name scale\n   * @type {number}\n   * @default 1\n   * @memberof module:shared.View\n   * @instance\n   */\n  scale: 1,\n\n  /**\n   * Rotation of the View.\n   *\n   * @name rotation\n   * @type {number}\n   * @default 0\n   * @memberof module:shared.View\n   * @instance\n   */\n  rotation: 0,\n\n  /**\n   * The index is an integer identifying the View, coming from ServerController.\n   *\n   * @name index\n   * @type {number}\n   * @default undefined\n   * @memberof module:shared.View\n   * @instance\n   */\n  index: undefined,\n});\n\n/**\n * This class allows generic Input data reporting between client and server.\n * Honestly it's a bit of a cheaty hack around the Message / Reporter protocol,\n * but it simplifies the code and makes things easier to maintain. And honestly\n * the Message / Reporter protocol is mostly focused on protecting Views and\n * Items anyway.\n *\n * @class DataReporter\n * @memberof module:shared\n * @extends module:shared.Reporter\n */\nconst DataReporter = ReporterFactory({\n  /**\n   * Generic data pass-through.\n   *\n   * @name data\n   * @type {Object}\n   * @default null\n   * @memberof module:shared.DataReporter\n   * @instance\n   */\n  data: null,\n});\n\n/**\n * This class allows reporting of the full state of the model, for bringing\n * new clients up to speed (or potentially also for recovering a client, if\n * need be).\n *\n * @class FullStateReporter\n * @memberof module:shared\n * @extends module:shared.Reporter\n */\nconst FullStateReporter = ReporterFactory({\n  /**\n   * All currently active views.\n   *\n   * @name views\n   * @type {View[]}\n   * @default []\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  views: [],\n\n  /**\n   * All current items.\n   *\n   * @name items\n   * @type {Item[]}\n   * @default []\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  items: [],\n\n  /**\n   * Paths to client scripts to include by browsers.\n   *\n   * @name clientScripts\n   * @type {string[]}\n   * @default []\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  clientScripts: [],\n\n  /**\n   * Paths to stylesheets to include by browsers.\n   *\n   * @name stylesheets\n   * @type {string[]}\n   * @default []\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  stylesheets: [],\n\n  /**\n   * Toggle to show/hide client shadows.\n   *\n   * @name shadows\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  shadows: false,\n\n  /**\n   * Toggle to show/hide current view status.\n   *\n   * @name status\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  status: false,\n\n  /**\n   * The background colour of the workspace.\n   *\n   * @name color\n   * @type {string}\n   * @default '#dad1e3'\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  color: '#dad1e3',\n\n  /**\n   * The background colour of the workspace.\n   *\n   * @name backgroundImage\n   * @type {string}\n   * @default null\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  backgroundImage: null,\n\n  /**\n   * The title of the page.\n   *\n   * @name title\n   * @type {string}\n   * @default 'WAMS: Workspaces Across Multiple Surfaces'\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  title: 'WAMS: Workspaces Across Multiple Surfaces',\n\n  /**\n   * The id assigned to this view.\n   *\n   * @name id\n   * @type {number}\n   * @default null\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  id: null,\n\n  /**\n   * Whether to enable multi-screen gestures\n   * by processing gestures on the server side.\n   *\n   * @name useMultiScreenGestures\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.FullStateReporter\n   * @instance\n   */\n  useMultiScreenGestures: false,\n});\n\n/**\n * Enables forwarding of TouchEvents from the client to the server.\n *\n * @class TouchReporter\n * @memberof module:shared\n * @extends module:shared.Reporter\n */\nconst TouchReporter = ReporterFactory({\n  /**\n   * The type of event. (e.g. 'pointerdown', 'pointermove', etc.)\n   *\n   * @name type\n   * @type {string}\n   * @default null\n   * @memberof module:shared.TouchReporter\n   * @instance\n   */\n  type: null,\n\n  /**\n   * Array of changed touches.\n   *\n   * @name changedTouches\n   * @type {Touch[]}\n   * @default []\n   * @memberof module:shared.TouchReporter\n   * @instance\n   */\n  changedTouches: [],\n\n  /**\n   * Whether the CTRL key was pressed at the time of the event.\n   *\n   * @name ctrlKey\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.TouchReporter\n   * @instance\n   */\n  ctrlKey: false,\n\n  /**\n   * Whether the ALT key was pressed at the time of the event.\n   *\n   * @name altKey\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.TouchReporter\n   * @instance\n   */\n  altKey: false,\n\n  /**\n   * Whether the SHIFT key was pressed at the time of the event.\n   *\n   * @name shiftKey\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.TouchReporter\n   * @instance\n   */\n  shiftKey: false,\n\n  /**\n   * Whether the META key was pressed at the time of the event.\n   *\n   * @name metaKey\n   * @type {boolean}\n   * @default false\n   * @memberof module:shared.TouchReporter\n   * @instance\n   */\n  metaKey: false,\n});\n\nmodule.exports = {\n  Item,\n  View,\n  DataReporter,\n  FullStateReporter,\n  TouchReporter,\n  WamsElement,\n  WamsImage,\n};\n","'use strict';\n\nconst IdStamper = require('./IdStamper.js');\n\n/**\n * This factory can generate the basic classes that need to communicate\n *  property values between the client and server.\n *\n * @memberof module:shared\n * @param {object} coreProperties - It is the properties defined on this object,\n * and only these properties, which will be reported by the reporter. The values\n * provided will be used as the defaults.\n */\nfunction ReporterFactory(coreProperties) {\n  const INITIALIZER = Object.freeze({ ...coreProperties });\n  const KEYS = Object.freeze(Object.keys(INITIALIZER));\n\n  /**\n   * A Reporter regulates communication between client and server by enforcing a\n   * strict set of rules over what data can be shared for the given class.\n   *\n   * @memberof module:shared\n   *\n   * @param {Object} data - Data to store in the reporter. All own properties of\n   * 'data' will be transferred. Additionally, the prototype chain of 'data'\n   * will be searched for the core properties of this Reporter.\n   */\n  class Reporter {\n    constructor(data) {\n      // Merge the defaults with all the own enumerable properties of 'data'\n      // onto the new instance.\n      Object.assign(this, INITIALIZER, data);\n\n      // Special access for coreProperties existing anywhere up the prototype\n      // chain of 'data'.\n      this.assign(data);\n    }\n\n    /**\n     * Save onto this Reporter instance the values in data which correspond to\n     * its core properties. Searches the prototype chain of 'data'.\n     *\n     * @param {Object} data - Data values to attempt to save.\n     */\n    assign(data = {}) {\n      KEYS.forEach((p) => {\n        if (p in data) this[p] = data[p];\n      });\n    }\n\n    /**\n     * Provide a report of the data saved in this Reporter instance. Only those\n     * instance properties which correspond to core properties will be reported.\n     *\n     * @return {Object} Contains the core properties of this Reporter instance.\n     */\n    report() {\n      const data = {};\n      KEYS.forEach((p) => {\n        data[p] = this[p];\n      });\n      IdStamper.cloneId(data, this.id);\n      return data;\n    }\n  }\n\n  // Expose the default settings onto the return class object.\n  Reporter.DEFAULTS = Object.freeze({ ...coreProperties });\n\n  return Reporter;\n}\n\nmodule.exports = ReporterFactory;\n","'use strict';\n\n/**\n * Defines a set of basic operations on a point in a two dimensional space.\n *\n * @memberof module:shared\n *\n * @param {number} [x=0] - x coordinate of the point.\n * @param {number} [y=0] - y coordinate of the point.\n */\nclass Point2D {\n  constructor(x = 0, y = 0) {\n    /**\n     * X coordinate of the point.\n     *\n     * @type {number}\n     */\n    this.x = x;\n\n    /**\n     * Y coordinate of the point.\n     *\n     * @type {number}\n     */\n    this.y = y;\n  }\n\n  /**\n   * Add the given point to this point.\n   *\n   * @param {module:shared.Point2D} point - The point to add.\n   *\n   * @return {module:shared.Point2D} this\n   */\n  add({ x = 0, y = 0 }) {\n    this.x += x;\n    this.y += y;\n    return this;\n  }\n\n  /**\n   * Calculates the angle between this point and the given point.\n   *\n   * @param {!module:shared.Point2D} point - Projected point for calculating\n   * the angle.\n   *\n   * @return {number} Radians along the unit circle where the projected point\n   * lies.\n   */\n  angleTo(point) {\n    return Math.atan2(point.y - this.y, point.x - this.x);\n  }\n\n  /**\n   * Determine the average distance from this point to the provided array of\n   * points.\n   *\n   * @param {!module:shared.Point2D[]} points - the Point2D objects to\n   * calculate the average distance to.\n   *\n   * @return {number} The average distance from this point to the provided\n   * points.\n   */\n  averageDistanceTo(points) {\n    return this.totalDistanceTo(points) / points.length;\n  }\n\n  /**\n   * Clones this point.\n   *\n   * @returns {module:shared.Point2D} An exact clone of this point.\n   */\n  clone() {\n    return new Point2D(this.x, this.y);\n  }\n\n  /**\n   * Calculates the distance between two points.\n   *\n   * @param {!module:shared.Point2D} point - Point to which the distance is\n   * calculated.\n   *\n   * @return {number} The distance between the two points, a.k.a. the\n   * hypoteneuse.\n   */\n  distanceTo(point) {\n    return Math.hypot(point.x - this.x, point.y - this.y);\n  }\n\n  /**\n   * Divide the point's values by the given amount.\n   *\n   * @param {number} coefficient - divide x,y by this amount.\n   *\n   * @return {module:shared.Point2D} this\n   */\n  divideBy(coefficient = 1) {\n    this.x /= coefficient;\n    this.y /= coefficient;\n    return this;\n  }\n\n  /**\n   * Tests if a point is Left|On|Right of an infinite line. Assumes that the\n   * given points are such that one is above and one is below this point. Note\n   * that the semantics of left/right is based on the normal coordinate space,\n   * not the y-axis-inverted coordinate space of images and the canvas.\n   *\n   * @see {@link http://geomalgorithms.com/a03-_inclusion.html}\n   *\n   * @param {module:shared.Point2D} p0 - first point of the line.\n   * @param {module:shared.Point2D} p1 - second point of the line.\n   *\n   * @return {number} >0 if this point is left of the line through p0 and p1\n   * @return {number} =0 if this point is on the line\n   * @return {number} <0 if this point is right of the line\n   */\n  isLeftOf(p0, p1) {\n    const dl = p1.minus(p0);\n    const dp = this.minus(p0);\n    return dl.x * dp.y - dl.y * dp.x;\n  }\n\n  /**\n   * Subtracts the given point from this point to form a new point.\n   *\n   * @param {module:shared.Point2D} p - Point to subtract from this point.\n   *\n   * @return {module:shared.Point2D} A new point which is the simple subraction\n   * of the given point from this point.\n   */\n  minus({ x = 0, y = 0 }) {\n    return new Point2D(this.x - x, this.y - y);\n  }\n\n  /**\n   * Multiply this point by the given point, in-place.\n   *\n   * @param {number} coefficient - Amount by which to multiply the values in\n   * this point.\n   *\n   * @return {module:shared.Point2D} this\n   */\n  multiplyBy(coefficient = 1) {\n    this.x *= coefficient;\n    this.y *= coefficient;\n    return this;\n  }\n\n  /**\n   * Rotate the point by theta radians.\n   *\n   * @param {number} theta - Amount of rotation to apply, in radians.\n   *\n   * @return {module:shared.Point2D} this\n   */\n  rotate(theta = 0) {\n    const { x, y } = this;\n    const cosTheta = Math.cos(theta);\n    const sinTheta = Math.sin(theta);\n\n    this.x = x * cosTheta - y * sinTheta;\n    this.y = x * sinTheta + y * cosTheta;\n\n    return this;\n  }\n\n  /**\n   * Calculates the total distance from this point to an array of points.\n   *\n   * @param {!module:shared.Point2D[]} points - The array of Point2D objects to\n   * calculate the total distance to.\n   *\n   * @return {number} The total distance from this point to the provided points.\n   */\n  totalDistanceTo(points) {\n    return points.reduce((d, p) => d + this.distanceTo(p), 0);\n  }\n\n  /**\n   * Calculates the midpoint of a list of points.\n   *\n   * @param {module:shared.Point2D[]} points - The array of Point2D objects for\n   * which to calculate the midpoint\n   *\n   * @return {?module:shared.Point2D} The midpoint of the provided points. Null\n   * if the provided array is empty.\n   */\n  static midpoint(points = []) {\n    if (points.length === 0) return null;\n\n    const total = Point2D.sum(points);\n    return new Point2D(total.x / points.length, total.y / points.length);\n  }\n\n  /**\n   * Calculates the sum of the given points.\n   *\n   * @param {module:shared.Point2D[]} points - The Point2D objects to sum up.\n   *\n   * @return {module:shared.Point2D} A new Point2D representing the sum of the\n   * given points.\n   */\n  static sum(points = []) {\n    return points.reduce((total, pt) => total.add(pt), new Point2D(0, 0));\n  }\n}\n\nmodule.exports = Point2D;\n","'use strict';\n\nconst Point2D = require('./Point2D.js');\n\n/**\n * A polygon in two dimensions. Can be complex.\n *\n * @memberof module:shared\n * @implements {module:shared.Hitbox}\n *\n * @param {module:shared.Point2D[]} points - The points that make up the\n * polygon, given in order (clockwise and counter-clockwise are both fine).\n */\nclass Polygon2D {\n  constructor(points) {\n    if (points.length < 1) {\n      throw new TypeError('A polygon requires at least one vertex.');\n    }\n\n    /**\n     * A closed list of the points making up this polygon. \"Closed\" here means\n     * that the first and last entries of the list are the same. Closing the\n     * polygon in this manner is handled by the constructor.\n     *\n     * @type {module:shared.Point2D[]}\n     */\n    this.points = points.map(({ x, y }) => new Point2D(x, y));\n\n    /**\n     * Store the centroid of the polygon for quick hit tests.\n     *\n     * @type {module:shared.Point2D[]}\n     */\n    this.centroid = Point2D.midpoint(this.points);\n\n    /**\n     * Save the maximum radius of the polygon for quick hit tests.\n     *\n     * @type {number}\n     */\n    this.radius = this.points.reduce((max, point) => {\n      const curr = this.centroid.distanceTo(point);\n      return max > curr ? max : curr;\n    });\n\n    // Close the polygon.\n    this.points.push(this.points[0].clone());\n  }\n\n  /**\n   * Determines if a point is inside the polygon.\n   *\n   * Rules for deciding whether a point is inside the polygon:\n   *  1. If it is clearly outside, return false.\n   *  2. If it is clearly inside, return true.\n   *  3. If it is on a left or bottom edge, return true.\n   *  4. If it is on a right or top edge, return false.\n   *  5. If it is on a lower-left vertex, return true.\n   *  6. If it is on a lower-right, upper-left, or upper-right vertex, return\n   *      false.\n   *\n   * Uses the winding number method for robust and efficient point-in-polygon\n   * detection.\n   * @see {@link http://geomalgorithms.com/a03-_inclusion.html}\n   *\n   * @param {module:shared.Point2D[]} p - Point to test.\n   *\n   * @return {boolean} true if the point is inside the polygon, false otherwise.\n   */\n  contains(p) {\n    if (this.centroid.distanceTo(p) > this.radius) {\n      return false;\n    }\n    return this.winding_number(p) !== 0;\n  }\n\n  /**\n   * Winding number test for a point in a polygon\n   *\n   * @see {@link http://geomalgorithms.com/a03-_inclusion.html}\n   *\n   * @param {module:shared.Point2D[]} point - The point to test.\n   *\n   * @return {number} The winding number (=0 only when P is outside)\n   */\n  winding_number(p) {\n    let wn = 0;\n    const point = new Point2D(p.x, p.y);\n\n    for (let i = 0; i < this.points.length - 1; ++i) {\n      if (this.points[i].y <= point.y) {\n        if (this.points[i + 1].y > point.y) {\n          // Upward crossing\n          if (point.isLeftOf(this.points[i], this.points[i + 1]) > 0) {\n            ++wn;\n          }\n        }\n      } else {\n        if (this.points[i + 1].y <= point.y) {\n          // Downward crossing\n          if (point.isLeftOf(this.points[i], this.points[i + 1]) < 0) {\n            --wn;\n          }\n        }\n      }\n    }\n\n    return wn;\n  }\n}\n\nmodule.exports = Polygon2D;\n","'use strict';\n\n/**\n * A rectangular hitbox. Remember that this rectangle describes the item as if\n * its settings were x=0, y=0, scale=1, rotation=0.\n *\n * @memberof module:shared\n * @implements {module:shared.Hitbox}\n *\n * @param {number} width - The width of the rectangle.\n * @param {number} height - The height of the rectangle.\n * @param {number} [x=0] - The x offset of the rectangle.\n * @param {number} [y=0] - The y offset of the rectangle.\n */\nclass Rectangle {\n  constructor(width, height, x = 0, y = 0) {\n    /**\n     * The width of the rectangle.\n     *\n     * @type {number}\n     */\n    this.width = width;\n\n    /**\n     * The height of the rectangle.\n     *\n     * @type {number}\n     */\n    this.height = height;\n\n    /**\n     * The x coordinate of the rectangle.\n     *\n     * @type {number}\n     */\n    this.x = x;\n\n    /**\n     * The y coordinate of the rectangle.\n     *\n     * @type {number}\n     */\n    this.y = y;\n  }\n\n  /**\n   * Determines if a point is inside the rectangle.\n   *\n   * @param {module:shared.Point2D} point - The point to test.\n   *\n   * @return {boolean} true if the point is inside the rectangle, false\n   * otherwise.\n   */\n  contains(point) {\n    return point.x >= this.x && point.x <= this.x + this.width && point.y >= this.y && point.y <= this.y + this.height;\n  }\n}\n\nmodule.exports = Rectangle;\n","'use strict';\n\n/**\n * A simple circular hitbox. Remember that this circle describes the item as if\n * its settings were x=0, y=0, scale=1, rotation=0.\n *\n * @memberof module:shared\n * @implements {module:shared.Hitbox}\n *\n * @param {number} radius - The radius of the circle.\n * @param {number} [x=0] - The x offset of the circle.\n * @param {number} [y=0] - The y offset of the circle.\n */\nclass Circle {\n  constructor(radius, x = 0, y = 0) {\n    /**\n     * The radius of the circle.\n     *\n     * @type {number}\n     */\n    this.radius = radius;\n\n    /**\n     * The x coordinate of the circle.\n     *\n     * @type {number}\n     */\n    this.x = x;\n\n    /**\n     * The y coordinate of the circle.\n     *\n     * @type {number}\n     */\n    this.y = y;\n  }\n\n  /**\n   * Determines if a point is inside the circle.\n   *\n   * @param {module:shared.Point2D} point - The point to test.\n   *\n   * @return {boolean} true if the point is inside the circle, false\n   * otherwise.\n   */\n  contains(point) {\n    const distance = Math.sqrt(Math.pow(point.x - this.x, 2) + Math.pow(point.y - this.y, 2));\n    return distance <= this.radius;\n  }\n}\n\nmodule.exports = Circle;\n","/**\n * This module contains classes and functions intended for use by both the\n * client and the server, in order to provide a common interface.\n *\n * <br>\n * <img\n * src =\n * \"https://raw.githubusercontent.com/mvanderkamp/wams.wiki/master/graphs/shared.png\"\n * style = \"max-height: 250px;\"\n * >\n *\n * @module shared\n */\n\n'use strict';\n\nconst IdStamper = require('./shared/IdStamper.js');\nconst Message = require('./shared/Message.js');\nconst Reporters = require('./shared/Reporters.js');\nconst Utils = require('./shared/utilities.js');\nconst Polygon2D = require('./shared/Polygon2D.js');\nconst Point2D = require('./shared/Point2D.js');\nconst Rectangle = require('./shared/Rectangle.js');\nconst Circle = require('./shared/Circle.js');\n\n/**\n * This object stores a set of core constants for use by both the client and\n *  the server.\n *\n * @memberof module:shared\n * @enum {number}\n */\nconst constants = {\n  // General constants\n  ROTATE_0: 0,\n  ROTATE_90: Math.PI / 2,\n  ROTATE_180: Math.PI,\n  ROTATE_270: Math.PI * 1.5,\n  ROTATE_360: Math.PI * 2,\n\n  // Namespaces\n  /** @type {string} */\n  NS_WAMS: '/wams',\n  NS_WAMS_TRACKING: '/',\n};\n\n/**\n * A list of colours, for use by the API for shadows, and by end-point apps too\n * if desired.\n *\n * @memberof module:shared\n * @type {string[]}\n */\nconst colours = [\n  'saddlebrown',\n  'red',\n  'blue',\n  'lime',\n  'darkorange',\n  'purple',\n  'yellow',\n  'aqua',\n  'darkgreen',\n  'fuchsia',\n];\n\n/*\n * Package up the module and freeze it for delivery.\n */\nmodule.exports = Object.freeze({\n  colours,\n  constants,\n  Circle,\n  IdStamper,\n  Message,\n  Point2D,\n  Polygon2D,\n  Rectangle,\n  ...Reporters,\n  ...Utils,\n});\n","'use strict';\n\nconst io = require('socket.io-client');\n\nconst { constants, DataReporter, TouchReporter, IdStamper, Message, NOP } = require('../shared.js');\nconst Interactor = require('./Interactor.js');\n\n// Symbols to identify these methods as intended only for internal use\nconst symbols = Object.freeze({\n  attachSocketIoListeners: Symbol('attachSocketIoListeners'),\n  render: Symbol('render'),\n});\n\n/**\n * The ClientController coordinates communication with the wams server. It sends\n * messages based on user interaction with the canvas and receives messages from\n * the server detailing changes to post to the view.\n *\n * @memberof module:client\n *\n * @param {HTMLCanvasElement} canvas - The underlying CanvasElement object, (not\n * the context), which will fill the page.\n * @param {module:client.ClientView} view - The view that will handle rendering\n * duties.\n * @param {module:client.ClientModel} model - The client-side copy of the\n * server's model.\n */\nclass ClientController {\n  constructor(root, canvas, view, model) {\n    /**\n     * Root element where WAMS canvas and HTML elements are located.\n     *\n     * @type {Element}\n     */\n    this.rootElement = root;\n\n    /**\n     * The HTMLCanvasElement object is stored by the ClientController so that it\n     * is able to respond to user events triggered on the canvas. The view only\n     * needs to know about the canvas drawing context.\n     *\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas = canvas;\n\n    /**\n     * From socket.io, the socket provides a channel of communication with the\n     * server.\n     *\n     * @type {Socket}\n     * @see {@link https://socket.io/docs/client-api/}\n     */\n    this.socket = null;\n\n    /**\n     * The ClientModel is a client-side copy of the workspace model, kept up to\n     * date by the controller.\n     *\n     * @type {module:client.ClientModel}\n     */\n    this.model = model;\n\n    /**\n     * The ClientView handles the final rendering of the model, as informed by\n     * the controller.\n     *\n     * @type {module:client.ClientView}\n     */\n    this.view = view;\n\n    /**\n     * List of custom event names that will be listened to.\n     *\n     * @type {array}\n     */\n    this.eventListeners = [];\n\n    /**\n     * Queue of events to be called once Client-side listeners are set up.\n     *\n     * @type {array}\n     */\n    this.eventQueue = [];\n\n    /**\n     * Tracks whether a render has been scheduled for the next render frame.\n     *\n     * @type {boolean}\n     */\n    this.renderScheduled = false;\n\n    /**\n     * Bound reference to the render method, for use as a callback.\n     *\n     * @type {function}\n     */\n    this.render_fn = this[symbols.render].bind(this);\n\n    /*\n     * For proper function, we need to make sure that the canvas is as large as\n     * it can be at all times, and that at all times we know how big the canvas\n     * is.\n     */\n    this.resizeCanvasToFillWindow();\n  }\n\n  /**\n   * Attaches listeners to messages received over the socket connection. All\n   * received messages at this layer should be those conforming to the Message /\n   * Reporter protocol.\n   *\n   * This internal routine should be called as part of socket establishment.\n   *\n   * @alias [@@attachSocketIoListeners]\n   * @memberof module:client.ClientController\n   */\n  [symbols.attachSocketIoListeners]() {\n    const listeners = {\n      // For the server to inform about changes to the model\n      [Message.ADD_ELEMENT]: (data) => this.handle('addElement', data),\n      [Message.ADD_IMAGE]: (data) => this.handle('addImage', data),\n      [Message.ADD_ITEM]: (data) => this.handle('addItem', data),\n      [Message.ADD_SHADOW]: (data) => this.handle('addShadow', data),\n      [Message.RM_ITEM]: (data) => this.handle('removeItem', data),\n      [Message.RM_SHADOW]: (data) => this.handle('removeShadow', data),\n      [Message.UD_ITEM]: (data) => this.handle('updateItem', data),\n      [Message.UD_SHADOW]: (data) => this.handle('updateShadow', data),\n      [Message.UD_VIEW]: (data) => this.handle('updateView', data),\n\n      // For hopefully occasional extra adjustments to objects in the model.\n      [Message.RM_ATTRS]: ({ data }) => this.handle('removeAttributes', data),\n      [Message.SET_ATTRS]: ({ data }) => this.handle('setAttributes', data),\n      [Message.SET_IMAGE]: ({ data }) => this.handle('setImage', data),\n      [Message.SET_RENDER]: ({ data }) => this.handle('setRender', data),\n      [Message.SET_PARENT]: ({ data }) => this.handle('setParent', data),\n\n      // Connection establishment related (disconnect, initial setup)\n      [Message.INITIALIZE]: (data) => this.setup(data),\n      [Message.LAYOUT]: NOP,\n\n      // User event related\n      [Message.CLICK]: NOP,\n      [Message.RESIZE]: NOP,\n      [Message.SWIPE]: NOP,\n      [Message.TRACK]: NOP,\n      [Message.TRANSFORM]: NOP,\n\n      // Multi-device gesture related\n      [Message.POINTER]: NOP,\n      [Message.BLUR]: NOP,\n\n      // TODO: This could be more... elegant...\n      [Message.FULL]: () => {\n        document.body.innerHTML = 'WAMS is full! :(';\n      },\n\n      // For user-defined behavior\n      [Message.DISPATCH]: ({ data }) => this.handleCustomEvent(data),\n    };\n\n    Object.entries(listeners).forEach(([p, v]) => this.socket.on(p, v));\n\n    // Keep the view size up to date.\n    window.addEventListener('resize', this.resize.bind(this), false);\n\n    /*\n     * As no automatic draw loop is used, (there are no animations), need to\n     * know when to re-render in response to an image loading.\n     */\n    const scheduleFn = this.scheduleRender.bind(this);\n    document.addEventListener(Message.IMG_LOAD, scheduleFn);\n  }\n\n  /**\n   * Establishes a socket.io connection with the server, using the global WAMS\n   * namespace. Connections should be non-persistent over disconnects, (i.e., no\n   * reconnections), as this was the cause of many bugs.\n   *\n   * This internal routine should be called automatically upon ClientController\n   * instantiation.\n   */\n  connect() {\n    this.socket = io.connect(constants.NS_WAMS, {\n      autoConnect: false,\n      reconnection: false,\n      transports: ['websocket', 'polling'],\n    });\n    this[symbols.attachSocketIoListeners]();\n    window.requestAnimationFrame(this.render_fn);\n    this.socket.connect();\n  }\n\n  /**\n   * Renders a frame.\n   *\n   * @alias [@@render]\n   * @memberof module:client.ClientController\n   */\n  [symbols.render]() {\n    if (this.renderScheduled) {\n      this.view.draw();\n      this.renderScheduled = false;\n    }\n    window.requestAnimationFrame(this.render_fn);\n  }\n\n  /**\n   * Generates a function for forwarding the given message to the server.\n   *\n   * @see {@link module:shared.Message}\n   *\n   * @param {string} message - The type of message to forward. One of the static\n   * members of the Message class.\n   *\n   * @return {Function} A function bound to this instance for forwarding data to\n   * the server with the given message type label.\n   */\n  forward(message, data) {\n    const dreport = new DataReporter({ data });\n    new Message(message, dreport).emitWith(this.socket);\n  }\n\n  /**\n   * Passes messages to the View, and schedules a render.\n   *\n   * @see {@link module:shared.Message}\n   *\n   * @param {string} message - The name of a ClientView method to run.\n   * @param {...*} data - The argument to pass to the ClientView method.\n   */\n  handle(message, data) {\n    this.model[message](data, this);\n    this.scheduleRender();\n  }\n\n  /**\n   * Helper function to ensure that only those events that\n   * have attached listeners will be dispatched by the ClientModel.\n   *\n   * @param {string} message - the name of the ClientModel method to run.\n   * @param {object} data - the argument to pass to `this.handle`.\n   */\n  handleCustomEvent(data) {\n    if (this.eventListeners.indexOf(data.action) < 0) {\n      this.eventQueue.push(data);\n    }\n    this.handle('dispatch', data);\n  }\n\n  /**\n   * For responding to window resizing by the user. Resizes the canvas to fit\n   * the new window size, and reports the change to the server so it can be\n   * reflected in the model.\n   */\n  resize() {\n    this.resizeCanvasToFillWindow();\n    new Message(Message.RESIZE, this.view).emitWith(this.socket);\n    this.view.draw();\n  }\n\n  /**\n   * Stretches the canvas to fit the available window space, and updates the\n   * view accordingly.\n   *\n   * Note: Scaling to account for device pixel ratio is disabled for iOS\n   * as a workaround for a bug with Safari and Chrome, where `context.setTransform`\n   * would make the page unresponsive.\n   */\n  resizeCanvasToFillWindow() {\n    const iOS = /iPad|iPhone|iPod|Apple/.test(window.navigator.platform);\n    const dpr = iOS ? 1 : window.devicePixelRatio || 1;\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n    this.canvas.width = w * dpr;\n    this.canvas.height = h * dpr;\n    this.canvas.style.width = `${w}px`;\n    this.canvas.style.height = `${h}px`;\n    this.view.resizeToFillWindow(dpr, iOS);\n  }\n\n  /**\n   * Schedules a render for the next frame interval.\n   */\n  scheduleRender() {\n    this.renderScheduled = true;\n  }\n\n  /**\n   * As this object will be instantiated on page load, and will generate a view\n   * before communication lines with the server have been opened, the view will\n   * not reflect the model automatically. This function responds to a message\n   * from the server which contains the current state of the model, and forwards\n   * this data to the view so that it can correctly render the model.\n   *\n   * @param {module:shared.FullStateReporter} data - All the information\n   * necessary to initially synchronize this client's model with the server's\n   * model.\n   */\n  setup(data) {\n    if (data.clientScripts) this.loadClientScripts(data.clientScripts);\n    if (data.stylesheets) this.loadStylesheets(data.stylesheets);\n    document.title = data.title;\n\n    IdStamper.cloneId(this.view, data.id);\n\n    if (data.backgroundImage) {\n      this.canvas.style.backgroundColor = 'transparent';\n      document.body.style.backgroundImage = `url(\"${data.backgroundImage}\")`;\n    } else {\n      this.canvas.style.backgroundColor = data.color;\n    }\n    this.model.setup(data);\n    this.setupInteractor(data.useMultiScreenGestures);\n\n    // Need to tell the model what the view looks like once setup is complete.\n    new Message(Message.LAYOUT, this.view).emitWith(this.socket);\n  }\n\n  loadClientScripts(scripts) {\n    scripts.forEach((src) => {\n      const script = document.createElement('script');\n      script.src = src;\n      document.body.appendChild(script);\n    });\n  }\n\n  loadStylesheets(stylesheets) {\n    stylesheets.forEach((src) => {\n      const link = document.createElement('link');\n      link.href = src;\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      document.head.appendChild(link);\n    });\n  }\n\n  /**\n   * The Interactor is a level of abstraction between the ClientController and\n   * the gesture recognition library such that libraries can be swapped out\n   * more easily, if need be. At least in theory. All the ClientController\n   * needs to provide is handler functions for responding to the recognized\n   * gestures.\n   *\n   * @param {boolean} [useMultiScreenGestures=false] Whether to use server-side\n   * gestures. Default is to use client-side gestures.\n   */\n  setupInteractor(useMultiScreenGestures = false) {\n    if (useMultiScreenGestures) {\n      this.setupInputForwarding();\n    } else {\n      // eslint-disable-next-line\n      new Interactor(this.rootElement, {\n        swipe: this.forward.bind(this, Message.SWIPE),\n        tap: this.forward.bind(this, Message.CLICK),\n        track: this.forward.bind(this, Message.TRACK),\n        transform: this.forward.bind(this, Message.TRANSFORM),\n      });\n    }\n  }\n\n  /**\n   * Set up input event forwarding.\n   */\n  setupInputForwarding() {\n    if (window.MouseEvent || window.TouchEvent) {\n      this.forwardTouchEvents();\n      this.forwardMouseEvents();\n    } else {\n      this.forwardPointerEvents();\n    }\n    this.forwardBlurEvents();\n  }\n\n  /**\n   * Forward the given events, by using the given callback.\n   *\n   * @param {string[]} eventnames\n   * @param {function} callback\n   */\n  forwardEvents(eventnames, callback) {\n    eventnames.forEach((eventname) => {\n      window.addEventListener(eventname, callback, {\n        capture: true,\n        once: false,\n        passive: false,\n      });\n    });\n  }\n\n  /**\n   * Forward blur and cancel events.\n   */\n  forwardBlurEvents() {\n    this.forwardEvents(['touchcancel', 'pointercancel', 'blur'], (event) => {\n      event.preventDefault();\n      const breport = new DataReporter();\n      new Message(Message.BLUR, breport).emitWith(this.socket);\n    });\n  }\n\n  /**\n   * Forward pointer events.\n   */\n  forwardPointerEvents() {\n    this.forwardEvents(['pointerdown', 'pointermove', 'pointerup'], (event) => {\n      event.preventDefault();\n      const treport = new TouchReporter(event);\n      treport.changedTouches = [\n        {\n          identifier: event.pointerId,\n          clientX: event.clientX,\n          clientY: event.clientY,\n        },\n      ];\n      new Message(Message.POINTER, treport).emitWith(this.socket);\n    });\n  }\n\n  /**\n   * Forward mouse events.\n   */\n  forwardMouseEvents() {\n    this.forwardEvents(['mousedown', 'mousemove', 'mouseup'], (event) => {\n      event.preventDefault();\n      if (event.button === 0) {\n        const treport = new TouchReporter(event);\n        treport.changedTouches = [\n          {\n            identifier: 0,\n            clientX: event.clientX,\n            clientY: event.clientY,\n          },\n        ];\n        new Message(Message.POINTER, treport).emitWith(this.socket);\n      }\n    });\n  }\n\n  /**\n   * Forward touch events.\n   */\n  forwardTouchEvents() {\n    this.forwardEvents(['touchstart', 'touchmove', 'touchend'], (event) => {\n      event.preventDefault();\n      const treport = new TouchReporter(event);\n      treport.changedTouches = Array.from(event.changedTouches).map((touch) => {\n        return {\n          identifier: touch.identifier,\n          clientX: touch.clientX,\n          clientY: touch.clientY,\n        };\n      });\n      new Message(Message.POINTER, treport).emitWith(this.socket);\n    });\n  }\n\n  /**\n   * Dispatch a custom ServerEvent.\n   *\n   * @param {string} action\n   * @param {object} payload\n   */\n  dispatch(action, payload) {\n    const dreport = new DataReporter({\n      data: { action, payload },\n    });\n    new Message(Message.DISPATCH, dreport).emitWith(this.socket);\n  }\n}\n\nmodule.exports = ClientController;\n","'use strict';\n\nlet g_id = 0;\n\n/**\n * The Gesture class that all gestures inherit from. A custom gesture class will\n * need to override some or all of the four phase \"hooks\": start, move, end, and\n * cancel.\n *\n * @memberof westures-core\n *\n * @param {string} type - The name of the gesture.\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n *    is recognized on the associated element.\n * @param {object} [options] - Generic gesture options\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n */\nclass Gesture {\n  constructor(type, element, handler, options = {}) {\n    if (typeof type !== 'string') {\n      throw new TypeError('Gestures require a string type / name');\n    }\n\n    /**\n     * The name of the gesture. (e.g. 'pan' or 'tap' or 'pinch').\n     *\n     * @type {string}\n     */\n    this.type = type;\n\n    /**\n     * The unique identifier for each gesture. This allows for distinctions\n     * across instances of Gestures that are created on the fly (e.g.\n     * gesture-tap-1, gesture-tap-2).\n     *\n     * @type {string}\n     */\n    this.id = `gesture-${this.type}-${g_id++}`;\n\n    /**\n     * The element to which to associate the gesture.\n     *\n     * @type {Element}\n     */\n    this.element = element;\n\n    /**\n     * The function handler to execute when the gesture is recognized on the\n     * associated element.\n     *\n     * @type {Function}\n     */\n    this.handler = handler;\n\n    /**\n     * The options. Can usually be adjusted live, though be careful doing this.\n     *\n     * @type {object}\n     */\n    this.options = { ...Gesture.DEFAULTS, ...options };\n  }\n\n  /**\n   * Determines whether this gesture is enabled.\n   *\n   * @param {westures-core.State} state - The input state object of the current\n   * region.\n   *\n   * @return {boolean} true if enabled, false otherwise.\n   */\n  isEnabled(state) {\n    const count = state.active.length;\n    const event = state.event;\n    const { enableKeys, disableKeys, minInputs, maxInputs } = this.options;\n\n    return (minInputs <= count) && (maxInputs >= count) &&\n      (enableKeys.length === 0 || enableKeys.some(k => event[k])) &&\n      !disableKeys.some(k => event[k]);\n  }\n\n  /**\n   * Event hook for the start phase of a gesture.\n   *\n   * @param {westures-core.State} state - The input state object of the current\n   * region.\n   *\n   * @return {?Object} Gesture is considered recognized if an Object is\n   *    returned.\n   */\n  start() {\n    return null;\n  }\n\n  /**\n   * Event hook for the move phase of a gesture.\n   *\n   * @param {westures-core.State} state - The input state object of the current\n   * region.\n   *\n   * @return {?Object} Gesture is considered recognized if an Object is\n   *    returned.\n   */\n  move() {\n    return null;\n  }\n\n  /**\n   * Event hook for the end phase of a gesture.\n   *\n   * @param {westures-core.State} state - The input state object of the current\n   * region.\n   *\n   * @return {?Object} Gesture is considered recognized if an Object is\n   *    returned.\n   */\n  end() {\n    return null;\n  }\n\n  /**\n   * Event hook for when an input is cancelled.\n   *\n   * @param {westures-core.State} state - The input state object of the current\n   * region.\n   *\n   * @return {?Object} Gesture is considered recognized if an Object is\n   *    returned.\n   */\n  cancel() {\n    return null;\n  }\n\n  /**\n   * Evalutes the given gesture hook, and dispatches any data that is produced\n   * by calling [recognize]{@link westures-core.Gesture#recognize}.\n   *\n   * @param {string} hook - Must be one of 'start', 'move', 'end', or 'cancel'.\n   * @param {westures-core.State} state - The current State instance.\n   */\n  evaluateHook(hook, state) {\n    const data = this[hook](state);\n    if (data) {\n      this.recognize(hook, state, data);\n    }\n  }\n\n  /**\n   * Recognize a Gesture by calling the handler. Standardizes the way the\n   * handler is called so that classes extending Gesture can circumvent the\n   * evaluateHook approach but still provide results that have a common format.\n   *\n   * Note that the properties in the \"data\" object will receive priority when\n   * constructing the results. This can be used to override standard results\n   * such as the phase or the centroid.\n   *\n   * @param {string} hook - Must be one of 'start', 'move', 'end', or 'cancel'.\n   * @param {westures-core.State} state - current input state.\n   * @param {Object} data - Results data specific to the recognized gesture.\n   */\n  recognize(hook, state, data) {\n    this.handler({\n      centroid: state.centroid,\n      event:    state.event,\n      phase:    hook,\n      type:     this.type,\n      target:   this.element,\n      ...data,\n    });\n  }\n}\n\nGesture.DEFAULTS = {\n  enableKeys:  [],\n  disableKeys: [],\n  minInputs:   1,\n  maxInputs:   Number.MAX_VALUE,\n};\n\nmodule.exports = Gesture;\n\n","'use strict';\n\n/**\n * The Point2D class stores and operates on 2-dimensional points, represented as\n * x and y coordinates.\n *\n * @memberof westures-core\n *\n * @param {number} [ x=0 ] - The x coordinate of the point.\n * @param {number} [ y=0 ] - The y coordinate of the point.\n */\nclass Point2D {\n  constructor(x = 0, y = 0) {\n    /**\n     * The x coordinate of the point.\n     *\n     * @type {number}\n     */\n    this.x = x;\n\n    /**\n     * The y coordinate of the point.\n     *\n     * @type {number}\n     */\n    this.y = y;\n  }\n\n  /**\n   * Calculates the angle between this point and the given point.\n   *\n   * @param {!westures-core.Point2D} point - Projected point for calculating the\n   * angle.\n   *\n   * @return {number} Radians along the unit circle where the projected\n   * point lies.\n   */\n  angleTo(point) {\n    return Math.atan2(point.y - this.y, point.x - this.x);\n  }\n\n  /**\n   * Determine the angle from the centroid to each of the points.\n   *\n   * @param {!westures-core.Point2D[]} points - the Point2D objects to calculate\n   *    the angles to.\n   *\n   * @returns {number[]}\n   */\n  anglesTo(points) {\n    return points.map(point => this.angleTo(point));\n  }\n\n  /**\n   * Determine the average distance from this point to the provided array of\n   * points.\n   *\n   * @param {!westures-core.Point2D[]} points - the Point2D objects to calculate\n   *    the average distance to.\n   *\n   * @return {number} The average distance from this point to the provided\n   *    points.\n   */\n  averageDistanceTo(points) {\n    return this.totalDistanceTo(points) / points.length;\n  }\n\n  /**\n   * Clone this point.\n   *\n   * @return {westures-core.Point2D} A new Point2D, identical to this point.\n   */\n  clone() {\n    return new Point2D(this.x, this.y);\n  }\n\n  /**\n   * Calculates the distance between two points.\n   *\n   * @param {!westures-core.Point2D} point - Point to which the distance is\n   * calculated.\n   *\n   * @return {number} The distance between the two points, a.k.a. the\n   *    hypoteneuse.\n   */\n  distanceTo(point) {\n    return Math.hypot(point.x - this.x, point.y - this.y);\n  }\n\n  /**\n   * Subtract the given point from this point.\n   *\n   * @param {!westures-core.Point2D} point - Point to subtract from this point.\n   *\n   * @return {westures-core.Point2D} A new Point2D, which is the result of (this\n   * - point).\n   */\n  minus(point) {\n    return new Point2D(\n      this.x - point.x,\n      this.y - point.y,\n    );\n  }\n\n  /**\n   * Return the summation of this point to the given point.\n   *\n   * @param {!westures-core.Point2D} point - Point to add to this point.\n   *\n   * @return {westures-core.Point2D} A new Point2D, which is the addition of the\n   * two points.\n   */\n  plus(point) {\n    return new Point2D(\n      this.x + point.x,\n      this.y + point.y,\n    );\n  }\n\n  /**\n   * Calculates the total distance from this point to an array of points.\n   *\n   * @param {!westures-core.Point2D[]} points - The array of Point2D objects to\n   *    calculate the total distance to.\n   *\n   * @return {number} The total distance from this point to the provided points.\n   */\n  totalDistanceTo(points) {\n    return points.reduce((d, p) => d + this.distanceTo(p), 0);\n  }\n\n  /**\n   * Calculates the centroid of a list of points.\n   *\n   * @param {westures-core.Point2D[]} points - The array of Point2D objects for\n   * which to calculate the centroid.\n   *\n   * @return {westures-core.Point2D} The centroid of the provided points.\n   */\n  static centroid(points = []) {\n    if (points.length === 0) return null;\n\n    const total = Point2D.sum(points);\n    total.x /= points.length;\n    total.y /= points.length;\n    return total;\n  }\n\n  /**\n   * Calculates the sum of the given points.\n   *\n   * @param {westures-core.Point2D[]} points - The Point2D objects to sum up.\n   *\n   * @return {westures-core.Point2D} A new Point2D representing the sum of the\n   * given points.\n   */\n  static sum(points = []) {\n    return points.reduce(\n      (total, pt) => {\n        total.x += pt.x;\n        total.y += pt.y;\n        return total;\n      },\n      new Point2D(0, 0),\n    );\n  }\n}\n\nmodule.exports = Point2D;\n\n","'use strict';\n\n/**\n * List of events that trigger the cancel phase.\n *\n * @memberof westures-core\n * @type {string[]}\n */\nconst CANCEL_EVENTS = [\n  'blur',\n  'pointercancel',\n  'touchcancel',\n  'mouseleave',\n];\n\n/**\n * List of keyboard events that trigger a restart.\n *\n * @memberof westures-core\n * @type {string[]}\n */\nconst KEYBOARD_EVENTS = [\n  'keydown',\n  'keyup',\n];\n\n/**\n * List of mouse events to listen to.\n *\n * @memberof westures-core\n * @type {string[]}\n */\nconst MOUSE_EVENTS = [\n  'mousedown',\n  'mousemove',\n  'mouseup',\n];\n\n/**\n * List of pointer events to listen to.\n *\n * @memberof westures-core\n * @type {string[]}\n */\nconst POINTER_EVENTS = [\n  'pointerdown',\n  'pointermove',\n  'pointerup',\n];\n\n/**\n * List of touch events to listen to.\n *\n * @memberof westures-core\n * @type {string[]}\n */\nconst TOUCH_EVENTS = [\n  'touchend',\n  'touchmove',\n  'touchstart',\n];\n\n/**\n * List of potentially state-modifying keys.\n * Entries are: ['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].\n *\n * @memberof westures-core\n * @type {string[]}\n */\nconst STATE_KEYS = [\n  'altKey',\n  'ctrlKey',\n  'metaKey',\n  'shiftKey',\n];\n\n/**\n * List of the 'key' values on KeyboardEvent objects of the potentially\n * state-modifying keys.\n *\n * @memberof westures-core\n * @type {string[]}\n */\nconst STATE_KEY_STRINGS = [\n  'Alt',\n  'Control',\n  'Meta',\n  'Shift',\n];\n\n/**\n * The cancel phase.\n *\n * @memberof westures-core\n * @type {string}\n */\nconst CANCEL = 'cancel';\n\n/**\n * The end phase.\n *\n * @memberof westures-core\n * @type {string}\n */\nconst END = 'end';\n\n/**\n * The move phase.\n *\n * @memberof westures-core\n * @type {string}\n */\nconst MOVE = 'move';\n\n/**\n * The start phase.\n *\n * @memberof westures-core\n * @type {string}\n */\nconst START = 'start';\n\n/**\n * The recognized phases.\n *\n * @memberof westures-core\n * @type {list.<string>}\n */\nconst PHASES = [START, MOVE, END, CANCEL];\n\n/**\n * Object that normalizes the names of window events to be either of type start,\n * move, end, or cancel.\n *\n * @memberof westures-core\n * @type {object}\n */\nconst PHASE = {\n  blur:           CANCEL,\n  pointercancel:  CANCEL,\n  touchcancel:    CANCEL,\n\n  mouseup:       END,\n  pointerup:     END,\n  touchend:      END,\n\n  mousemove:   MOVE,\n  pointermove: MOVE,\n  touchmove:   MOVE,\n\n  mousedown:   START,\n  pointerdown: START,\n  touchstart:  START,\n};\n\nmodule.exports = {\n  CANCEL_EVENTS,\n  KEYBOARD_EVENTS,\n  MOUSE_EVENTS,\n  POINTER_EVENTS,\n  TOUCH_EVENTS,\n\n  STATE_KEYS,\n  STATE_KEY_STRINGS,\n\n  CANCEL,\n  END,\n  MOVE,\n  START,\n\n  PHASE,\n  PHASES,\n};\n\n","'use strict';\n\nconst Point2D   = require('./Point2D.js');\nconst { PHASE } = require('./constants.js');\n\n/**\n * @private\n * @inner\n * @memberof westures-core.PointerData\n *\n * @return {Event} The Event object which corresponds to the given identifier.\n *    Contains clientX, clientY values.\n */\nfunction getEventObject(event, identifier) {\n  if (event.changedTouches) {\n    return Array.from(event.changedTouches).find(touch => {\n      return touch.identifier === identifier;\n    });\n  }\n  return event;\n}\n\n/**\n * Low-level storage of pointer data based on incoming data from an interaction\n * event.\n *\n * @memberof westures-core\n *\n * @param {Event} event - The event object being wrapped.\n * @param {number} identifier - The index of touch if applicable\n */\nclass PointerData {\n  constructor(event, identifier) {\n    const { clientX, clientY } = getEventObject(event, identifier);\n\n    /**\n     * The original event object.\n     *\n     * @type {Event}\n     */\n    this.event = event;\n\n    /**\n     * The type or 'phase' of this batch of pointer data. 'start' or 'move' or\n     * 'end' or 'cancel'\n     *\n     * @type {string}\n     */\n    this.type = PHASE[event.type];\n\n    /**\n     * The timestamp of the event in milliseconds elapsed since January 1, 1970,\n     * 00:00:00 UTC.\n     *\n     * @type {number}\n     */\n    this.time = Date.now();\n\n    /**\n     * The (x,y) coordinate of the event, wrapped in a Point2D.\n     *\n     * @type {westures-core.Point2D}\n     */\n    this.point = new Point2D(clientX, clientY);\n  }\n}\n\nmodule.exports = PointerData;\n\n","'use strict';\n\nconst PI_2   = 2 * Math.PI;\nconst PI_NVE = -Math.PI;\n\n/**\n * Helper function to regulate angular differences, so they don't jump from 0 to\n * 2 * PI or vice versa.\n *\n * @memberof westures-core\n *\n * @param {number} a - Angle in radians.\n * @param {number} b - Angle in radians.\n\n * @return {number} c, given by: c = a - b such that |c| < PI\n */\nfunction angularDifference(a, b) {\n  let diff = a - b;\n  if (diff < PI_NVE) {\n    diff += PI_2;\n  } else if (diff > Math.PI) {\n    diff -= PI_2;\n  }\n  return diff;\n}\n\n/**\n * In case event.composedPath() is not available.\n *\n * @memberof westures-core\n *\n * @param {Event} event\n *\n * @return {Element[]} The elements along the composed path of the event.\n */\nfunction getPropagationPath(event) {\n  if (typeof event.composedPath === 'function') {\n    return event.composedPath();\n  }\n\n  const path = [];\n  for (let node = event.target; node !== document; node = node.parentNode) {\n    path.push(node);\n  }\n  path.push(document);\n  path.push(window);\n\n  return path;\n}\n\n/**\n * Performs a set filter operation.\n *\n * @memberof westures-core\n *\n * @param {Set} set - The set to filter.\n * @param {Function} predicate - Function to test elements of 'set'. Receives\n * one argument: the current set element.\n *\n * @return {Set} Set consisting of elements in 'set' for which 'predicate' is\n * true.\n */\nfunction setFilter(set, predicate) {\n  const result = new Set();\n  set.forEach(element => {\n    if (predicate(element)) {\n      result.add(element);\n    }\n  });\n  return result;\n}\n\n/**\n * Performs a set difference operation.\n *\n * @memberof westures-core\n *\n * @param {Set} left - Base set.\n * @param {Set} right - Set of elements to remove from 'left'.\n *\n * @return {Set} Set consisting of elements in 'left' that are not in\n * 'right'.\n */\nfunction setDifference(left, right) {\n  return setFilter(left, element => !right.has(element));\n}\n\nmodule.exports = {\n  angularDifference,\n  getPropagationPath,\n  setDifference,\n  setFilter,\n};\n\n","'use strict';\n\nconst PointerData = require('./PointerData.js');\nconst { getPropagationPath } = require('./utils.js');\n\n/**\n * Tracks a single input and contains information about the current, previous,\n * and initial events.\n *\n * @memberof westures-core\n *\n * @param {(PointerEvent | MouseEvent | TouchEvent)} event - The input event\n * which will initialize this Input object.\n * @param {number} identifier - The identifier for this input, so that it can\n * be located in subsequent Event objects.\n */\nclass Input {\n  constructor(event, identifier) {\n    const currentData = new PointerData(event, identifier);\n\n    /**\n     * The set of elements along the original event's propagation path at the\n     * time it was dispatched.\n     *\n     * @type {WeakSet.<Element>}\n     */\n    this.initialElements = new WeakSet(getPropagationPath(event));\n\n    /**\n     * Holds the initial data from the mousedown / touchstart / pointerdown that\n     * began this input.\n     *\n     * @type {westures-core.PointerData}\n     */\n    this.initial = currentData;\n\n    /**\n     * Holds the most current pointer data for this Input.\n     *\n     * @type {westures-core.PointerData}\n     */\n    this.current = currentData;\n\n    /**\n     * Holds the previous pointer data for this Input.\n     *\n     * @type {westures-core.PointerData}\n     */\n    this.previous = currentData;\n\n    /**\n     * The identifier for the pointer / touch / mouse button associated with\n     * this input.\n     *\n     * @type {number}\n     */\n    this.identifier = identifier;\n  }\n\n  /**\n   * The phase of the input: 'start' or 'move' or 'end' or 'cancel'\n   *\n   * @type {string}\n   */\n  get phase() { return this.current.type; }\n\n  /**\n   * The timestamp of the initiating event for this input.\n   *\n   * @type {number}\n   */\n  get startTime() { return this.initial.time; }\n\n  /**\n   * The amount of time elapsed between the start of this input and its latest\n   * event.\n   *\n   * @type {number}\n   */\n  get elapsedTime() { return this.current.time - this.initial.time; }\n\n  /**\n   * @return {number} The distance between the initiating event for this input\n   *    and its current event.\n   */\n  totalDistance() {\n    return this.initial.point.distanceTo(this.current.point);\n  }\n\n  /**\n   * Saves the given raw event in PointerData form as the current data for this\n   * input, pushing the old current data into the previous slot, and tossing\n   * out the old previous data.\n   *\n   * @param {Event} event - The event object to wrap with a PointerData.\n   */\n  update(event) {\n    this.previous = this.current;\n    this.current = new PointerData(event, this.identifier);\n  }\n}\n\nmodule.exports = Input;\n\n","'use strict';\n\nconst {\n  CANCEL,\n  END,\n  MOVE,\n  PHASE,\n  START,\n} = require('./constants.js');\nconst Input     = require('./Input.js');\nconst Point2D   = require('./Point2D.js');\n\nconst symbols = {\n  inputs: Symbol.for('inputs'),\n};\n\n/**\n * Set of helper functions for updating inputs based on type of input.\n * Must be called with a bound 'this', via bind(), or call(), or apply().\n *\n * @private\n * @inner\n * @memberof westure-core.State\n */\nconst update_fns = {\n  TouchEvent: function TouchEvent(event) {\n    Array.from(event.changedTouches).forEach(touch => {\n      this.updateInput(event, touch.identifier);\n    });\n  },\n\n  PointerEvent: function PointerEvent(event) {\n    this.updateInput(event, event.pointerId);\n  },\n\n  MouseEvent: function MouseEvent(event) {\n    if (event.button === 0) {\n      this.updateInput(event, event.button);\n    }\n  },\n};\n\n/**\n * Keeps track of currently active and ending input points on the interactive\n * surface.\n *\n * @memberof westures-core\n *\n * @param {Element} element - The element underpinning the associated Region.\n */\nclass State {\n  constructor(element) {\n    /**\n     * Keep a reference to the element for the associated region.\n     *\n     * @type {Element}\n     */\n    this.element = element;\n\n    /**\n     * Keeps track of the current Input objects.\n     *\n     * @alias [@@inputs]\n     * @type {Map.<westures-core.Input>}\n     * @memberof westure-core.State\n     */\n    this[symbols.inputs] = new Map();\n\n    /**\n     * All currently valid inputs, including those that have ended.\n     *\n     * @type {westures-core.Input[]}\n     */\n    this.inputs = [];\n\n    /**\n     * The array of currently active inputs, sourced from the current Input\n     * objects. \"Active\" is defined as not being in the 'end' phase.\n     *\n     * @type {westures-core.Input[]}\n     */\n    this.active = [];\n\n    /**\n     * The array of latest point data for the currently active inputs, sourced\n     * from this.active.\n     *\n     * @type {westures-core.Point2D[]}\n     */\n    this.activePoints = [];\n\n    /**\n     * The centroid of the currently active points.\n     *\n     * @type {westures-core.Point2D}\n     */\n    this.centroid = {};\n\n    /**\n     * The latest event that the state processed.\n     *\n     * @type {Event}\n     */\n    this.event = null;\n  }\n\n  /**\n   * Deletes all inputs that are in the 'end' phase.\n   */\n  clearEndedInputs() {\n    this[symbols.inputs].forEach((v, k) => {\n      if (v.phase === 'end') this[symbols.inputs].delete(k);\n    });\n  }\n\n  /**\n   * @param {string} phase - One of 'start', 'move', 'end', or 'cancel'.\n   *\n   * @return {westures-core.Input[]} Inputs in the given phase.\n   */\n  getInputsInPhase(phase) {\n    return this.inputs.filter(i => i.phase === phase);\n  }\n\n  /**\n   * @param {string} phase - One of 'start', 'move', 'end', or 'cancel'.\n   *\n   * @return {westures-core.Input[]} Inputs <b>not</b> in the given phase.\n   */\n  getInputsNotInPhase(phase) {\n    return this.inputs.filter(i => i.phase !== phase);\n  }\n\n  /**\n   * @return {boolean} True if there are no active inputs. False otherwise.\n   */\n  hasNoInputs() {\n    return this[symbols.inputs].size === 0;\n  }\n\n  /**\n   * Update the input with the given identifier using the given event.\n   *\n   * @private\n   *\n   * @param {Event} event - The event being captured.\n   * @param {number} identifier - The identifier of the input to update.\n   */\n  updateInput(event, identifier) {\n    switch (PHASE[event.type]) {\n    case START:\n      this[symbols.inputs].set(\n        identifier,\n        new Input(event, identifier),\n      );\n      try {\n        this.element.setPointerCapture(identifier);\n      } catch (e) {\n        // NOP: Optional operation failed.\n      }\n      break;\n\n    // All of 'end', 'move', and 'cancel' perform updates, hence the\n    // following fall-throughs\n    case END:\n      try {\n        this.element.releasePointerCapture(identifier);\n      } catch (e) {\n        // NOP: Optional operation failed.\n      }\n    case CANCEL:\n    case MOVE:\n      if (this[symbols.inputs].has(identifier)) {\n        this[symbols.inputs].get(identifier).update(event);\n      }\n      break;\n\n    default:\n      console.warn(`Unrecognized event type: ${event.type}`);\n    }\n  }\n\n  /**\n   * Updates the inputs with new information based upon a new event being fired.\n   *\n   * @private\n   * @param {Event} event - The event being captured.\n   */\n  updateAllInputs(event) {\n    update_fns[event.constructor.name].call(this, event);\n    this.updateFields(event);\n  }\n\n  /**\n   * Updates the convenience fields.\n   *\n   * @private\n   * @param {Event} event - Event with which to update the convenience fields.\n   */\n  updateFields(event) {\n    this.inputs = Array.from(this[symbols.inputs].values());\n    this.active = this.getInputsNotInPhase('end');\n    this.activePoints = this.active.map(i => i.current.point);\n    this.centroid = Point2D.centroid(this.activePoints);\n    this.event = event;\n  }\n}\n\nmodule.exports = State;\n\n","'use strict';\n\nconst State = require('./State.js');\nconst {\n  CANCEL_EVENTS,\n  KEYBOARD_EVENTS,\n  MOUSE_EVENTS,\n  POINTER_EVENTS,\n  TOUCH_EVENTS,\n\n  STATE_KEY_STRINGS,\n\n  PHASE,\n\n  CANCEL,\n  END,\n  START,\n} = require('./constants.js');\nconst {\n  setDifference,\n  setFilter,\n} = require('./utils.js');\n\n/**\n * Allows the user to specify the control region which will listen for user\n * input events.\n *\n * @memberof westures-core\n *\n * @param {Element} element=window - The element which should listen to input\n * events.\n * @param {object} [options]\n * @param {boolean} [options.capture=false] - Whether the region uses the\n * capture phase of input events. If false, uses the bubbling phase.\n * @param {boolean} [options.preferPointer=true] - If false, the region listens\n * to mouse/touch events instead of pointer events.\n * @param {boolean} [options.preventDefault=true] - Whether the default\n * browser functionality should be disabled. This option should most likely be\n * ignored. Here there by dragons if set to false.\n * @param {string} [options.touchAction='none'] - Value to set the CSS\n * 'touch-action' property to on elements added to the region.\n */\nclass Region {\n  constructor(element = window, options = {}) {\n    options = { ...Region.DEFAULTS, ...options };\n\n    /**\n     * The list of relations between elements, their gestures, and the handlers.\n     *\n     * @type {Set.<westures-core.Gesture>}\n     */\n    this.gestures = new Set();\n\n    /**\n     * The list of active gestures for the current input session.\n     *\n     * @type {Set.<westures-core.Gesture>}\n     */\n    this.activeGestures = new Set();\n\n    /**\n     * The base list of potentially active gestures for the current input\n     * session.\n     *\n     * @type {Set.<westures-core.Gesture>}\n     */\n    this.potentialGestures = new Set();\n\n    /**\n     * The element being bound to.\n     *\n     * @type {Element}\n     */\n    this.element = element;\n\n    /**\n     * The user-supplied options for the Region.\n     *\n     * @type {object}\n     */\n    this.options = options;\n\n    /**\n     * The internal state object for a Region.  Keeps track of inputs.\n     *\n     * @type {westures-core.State}\n     */\n    this.state = new State(this.element);\n\n    // Begin operating immediately.\n    this.activate();\n  }\n\n  /**\n   * Activates the region by adding event listeners for all appropriate input\n   * events to the region's element.\n   *\n   * @private\n   */\n  activate() {\n    /*\n     * Listening to both mouse and touch comes with the difficulty that\n     * preventDefault() must be called to prevent both events from iterating\n     * through the system. However I have left it as an option to the end user,\n     * which defaults to calling preventDefault(), in case there's a use-case I\n     * haven't considered or am not aware of.\n     *\n     * It also may be a good idea to keep regions small in large pages.\n     *\n     * See:\n     *  https://www.html5rocks.com/en/mobile/touchandmouse/\n     *  https://developer.mozilla.org/en-US/docs/Web/API/Touch_events\n     *  https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events\n     */\n    let eventNames = [];\n    if (this.options.preferPointer && window.PointerEvent) {\n      eventNames = POINTER_EVENTS;\n    } else {\n      eventNames = MOUSE_EVENTS.concat(TOUCH_EVENTS);\n    }\n\n    // Bind detected browser events to the region element.\n    const arbitrate = this.arbitrate.bind(this);\n    eventNames.forEach(eventName => {\n      this.element.addEventListener(eventName, arbitrate, {\n        capture: this.options.capture,\n        once:    false,\n        passive: false,\n      });\n    });\n\n    const cancel = this.cancel.bind(this);\n    CANCEL_EVENTS.forEach(eventName => {\n      window.addEventListener(eventName, cancel);\n    });\n\n    const handleKeyboardEvent = this.handleKeyboardEvent.bind(this);\n    KEYBOARD_EVENTS.forEach(eventName => {\n      window.addEventListener(eventName, handleKeyboardEvent);\n    });\n  }\n\n  /**\n   * Handles a cancel event. Resets the state and the active / potential gesture\n   * lists.\n   *\n   * @private\n   * @param {Event} event - The event emitted from the window object.\n   */\n  cancel(event) {\n    if (this.options.preventDefault) event.preventDefault();\n    this.state.inputs.forEach(input => {\n      input.update(event);\n    });\n    this.activeGestures.forEach(gesture => {\n      gesture.evaluateHook(CANCEL, this.state);\n    });\n    this.state = new State(this.element);\n    this.resetActiveGestures();\n  }\n\n  /**\n   * Handles a keyboard event, triggering a restart of any gestures that need\n   * it.\n   *\n   * @private\n   * @param {KeyboardEvent} event - The keyboard event.\n   */\n  handleKeyboardEvent(event) {\n    if (STATE_KEY_STRINGS.indexOf(event.key) >= 0) {\n      this.state.event = event;\n      const oldActiveGestures = this.activeGestures;\n      this.setActiveGestures();\n\n      setDifference(oldActiveGestures, this.activeGestures).forEach(gesture => {\n        gesture.evaluateHook(END, this.state);\n      });\n      setDifference(this.activeGestures, oldActiveGestures).forEach(gesture => {\n        gesture.evaluateHook(START, this.state);\n      });\n    }\n  }\n\n  /**\n   * Resets the active gestures.\n   *\n   * @private\n   */\n  resetActiveGestures() {\n    this.potentialGestures = new Set();\n    this.activeGestures = new Set();\n  }\n\n  /**\n   * Selects active gestures from the list of potentially active gestures.\n   *\n   * @private\n   */\n  setActiveGestures() {\n    this.activeGestures = setFilter(this.potentialGestures, gesture => {\n      return gesture.isEnabled(this.state);\n    });\n  }\n\n  /**\n   * Selects the potentially active gestures.\n   *\n   * @private\n   */\n  setPotentialGestures() {\n    const input = this.state.inputs[0];\n    this.potentialGestures = setFilter(this.gestures, gesture => {\n      return input.initialElements.has(gesture.element);\n    });\n  }\n\n  /**\n   * Selects the gestures that are active for the current input sequence.\n   *\n   * @private\n   * @param {Event} event - The event emitted from the window object.\n   * @param {boolean} isInitial - Whether this is an initial contact.\n   */\n  updateActiveGestures(event, isInitial) {\n    if (PHASE[event.type] === START) {\n      if (isInitial) {\n        this.setPotentialGestures();\n      }\n      this.setActiveGestures();\n    }\n  }\n\n  /**\n   * Evaluates whether the current input session has completed.\n   *\n   * @private\n   * @param {Event} event - The event emitted from the window object.\n   */\n  pruneActiveGestures(event) {\n    if (PHASE[event.type] === END) {\n      if (this.state.hasNoInputs()) {\n        this.resetActiveGestures();\n      } else {\n        this.setActiveGestures();\n      }\n    }\n  }\n\n  /**\n   * All input events flow through this function. It makes sure that the input\n   * state is maintained, determines which gestures to analyze based on the\n   * initial position of the inputs, calls the relevant gesture hooks, and\n   * dispatches gesture data.\n   *\n   * @private\n   * @param {Event} event - The event emitted from the window object.\n   */\n  arbitrate(event) {\n    const isInitial = this.state.hasNoInputs();\n    this.state.updateAllInputs(event);\n    this.updateActiveGestures(event, isInitial);\n\n    if (this.activeGestures.size > 0) {\n      if (this.options.preventDefault) event.preventDefault();\n\n      this.activeGestures.forEach(gesture => {\n        gesture.evaluateHook(PHASE[event.type], this.state);\n      });\n    }\n\n    this.state.clearEndedInputs();\n    this.pruneActiveGestures(event);\n  }\n\n  /**\n   * Adds the given gesture to the region.\n   *\n   * @param {westures-core.Gesture} gesture - Instantiated gesture to add.\n   */\n  addGesture(gesture) {\n    gesture.element.style.touchAction = this.options.touchAction;\n    this.gestures.add(gesture);\n  }\n\n  /**\n   * Removes the given gesture from the region.\n   *\n   * @param {westures-core.Gesture} gesture - Instantiated gesture to add.\n   */\n  removeGesture(gesture) {\n    this.gestures.delete(gesture);\n    this.potentialGestures.delete(gesture);\n    this.activeGestures.delete(gesture);\n  }\n\n  /**\n   * Retrieves Gestures by their associated element.\n   *\n   * @param {Element} element - The element for which to find gestures.\n   *\n   * @return {westures-core.Gesture[]} Gestures to which the element is bound.\n   */\n  getGesturesByElement(element) {\n    return setFilter(this.gestures, gesture => gesture.element === element);\n  }\n\n  /**\n   * Remove all gestures bound to the given element.\n   *\n   * @param {Element} element - The element to unbind.\n   */\n  removeGesturesByElement(element) {\n    this.getGesturesByElement(element).forEach(g => this.removeGesture(g));\n  }\n}\n\nRegion.DEFAULTS = {\n  capture:        false,\n  preferPointer:  true,\n  preventDefault: true,\n  touchAction:    'none',\n};\n\nmodule.exports = Region;\n","'use strict';\n\nconst cascade = Symbol('cascade');\nconst smooth = Symbol('smooth');\n\n/**\n * Determines whether to apply smoothing. Smoothing is on by default but turned\n * off if either:<br>\n *  1. The user explicitly requests that it be turned off.<br>\n *  2. The active pointer is not \"coarse\".<br>\n *\n * @see {@link\n * https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia}\n *\n * @inner\n * @memberof westures-core.Smoothable\n *\n * @param {boolean} isRequested - Whether smoothing was requested by the user.\n *\n * @returns {boolean} Whether to apply smoothing.\n */\nfunction smoothingIsApplicable(isRequested) {\n  if (isRequested) {\n    try {\n      return window.matchMedia('(pointer: coarse)').matches;\n    } catch (e) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A Smoothable datatype is one that is capable of smoothing out a series of\n * values as they come in, one at a time, providing a more consistent series. It\n * does this by creating some inertia in the values using a cascading average.\n * (For those who are interested in such things, this effectively means that it\n * provides a practical application of Zeno's Dichotomy).\n *\n * @example\n * const x = new Smoothable({ identity: 1 });\n * const a = x.next(1);   // 1.0\n * const b = x.next(1.2); // 1.1\n * const c = x.next(0.9); // 1.0\n * const d = x.next(0.6); // 0.8\n * const e = x.next(1.2); // 1.0\n * const f = x.next(1.6); // 1.3\n * x.restart();\n * const g = x.next(0);   // 0.5\n *\n * @memberof westures-core\n *\n * @param {Object} [options]\n * @param {boolean} [options.applySmoothing=true] Whether to apply smoothing to\n * the data.\n * @param {*} [options.identity=0] The identity value of this smoothable data.\n */\nclass Smoothable {\n  constructor(options = {}) {\n    const final_options = { ...Smoothable.DEFAULTS, ...options };\n\n    /**\n     * The function through which smoothed emits are passed.\n     *\n     * @method\n     * @param {*} data - The data to emit.\n     *\n     * @return {*} The smoothed out data.\n     */\n    this.next = null;\n    if (smoothingIsApplicable(final_options.applySmoothing)) {\n      this.next = this[smooth].bind(this);\n    } else {\n      this.next = data => data;\n    }\n\n    /**\n     * The \"identity\" value of the data that will be smoothed.\n     *\n     * @type {*}\n     * @default 0\n     */\n    this.identity = final_options.identity;\n\n    /**\n     * The cascading average of outgoing values.\n     *\n     * @memberof westures-core.Smoothable\n     * @alias [@@cascade]\n     * @type {object}\n     */\n    this[cascade] = this.identity;\n  }\n\n  /**\n   * Restart the Smoothable gesture.\n   */\n  restart() {\n    this[cascade] = this.identity;\n  }\n\n  /**\n   * Smooth out the outgoing data.\n   *\n   * @memberof westures-core.Smoothable\n   * @alias [@@smooth]\n   * @param {object} data - The next batch of data to emit.\n   *\n   * @return {?object}\n   */\n  [smooth](data) {\n    const average = this.average(this[cascade], data);\n    this[cascade] = average;\n    return average;\n  }\n\n  /**\n   * Average out two values, as part of the smoothing algorithm. Override this\n   * method if the data being smoothed is not a Number.\n   *\n   * @param {number} a\n   * @param {number} b\n   *\n   * @return {number} The average of 'a' and 'b'\n   */\n  average(a, b) {\n    return (a + b) / 2;\n  }\n}\n\nSmoothable.DEFAULTS = {\n  applySmoothing: true,\n  identity:       0,\n};\n\nmodule.exports = Smoothable;\n\n","/*\n * Contains the Pan class.\n */\n\n'use strict';\n\nconst { Gesture, Point2D, Smoothable } = require('../core');\n\n/**\n * Data returned when a Pan is recognized.\n *\n * @typedef {Object} PanData\n * @mixes ReturnTypes.BaseData\n *\n * @property {westures-core.Point2D} translation - The change vector from the\n * last emit.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Pan is defined as a normal movement in any direction.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.PanData}\n * @see {westures-core.Smoothable}\n * @memberof westures\n *\n * @param {Element} element - The element with which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {boolean} [options.applySmoothing=true] - Whether to apply inertial\n * smoothing for systems with coarse pointers.\n */\nclass Pan extends Gesture {\n  constructor(element, handler, options = {}) {\n    super('pan', element, handler, options);\n\n    /**\n     * The previous point location.\n     *\n     * @type {westures-core.Point2D}\n     */\n    this.previous = null;\n\n    /*\n     * The outgoing data, with optional inertial smoothing.\n     *\n     * @override\n     * @type {westures-core.Smoothable<westures-core.Point2D>}\n     */\n    this.outgoing = new Smoothable({ ...options, identity: new Point2D() });\n    this.outgoing.average = (a, b) => Point2D.centroid([a, b]);\n  }\n\n  /**\n   * Resets the gesture's progress by saving the current centroid of the active\n   * inputs. To be called whenever the number of inputs changes.\n   *\n   * @param {State} state\n   */\n  restart(state) {\n    this.previous = state.centroid;\n    this.outgoing.restart();\n  }\n\n  start(state) {\n    this.restart(state);\n  }\n\n  move(state) {\n    const translation = state.centroid.minus(this.previous);\n    this.previous = state.centroid;\n    return { translation: this.outgoing.next(translation) };\n  }\n\n  end(state) {\n    this.restart(state);\n  }\n\n  cancel(state) {\n    this.restart(state);\n  }\n}\n\nmodule.exports = Pan;\n\n","/**\n * The global API interface for westures-core. Exposes all classes, constants,\n * and routines used by the package. Use responsibly.\n *\n * @namespace westures-core\n */\n\n'use strict';\n\nconst Gesture = require('./src/Gesture.js');\nconst Input = require('./src/Input.js');\nconst Point2D = require('./src/Point2D.js');\nconst PointerData = require('./src/PointerData.js');\nconst Region = require('./src/Region.js');\nconst Smoothable = require('./src/Smoothable.js');\nconst State = require('./src/State.js');\nconst constants = require('./src/constants.js');\nconst utils = require('./src/utils.js');\n\nmodule.exports = {\n  Gesture,\n  Input,\n  Point2D,\n  PointerData,\n  Region,\n  Smoothable,\n  State,\n  ...constants,\n  ...utils,\n};\n\n","/*\n * Contains the abstract Pinch class.\n */\n\n'use strict';\n\nconst { Gesture, Smoothable } = require('../core');\n\n/**\n * Data returned when a Pinch is recognized.\n *\n * @typedef {Object} PinchData\n * @mixes ReturnTypes.BaseData\n *\n * @property {number} distance - The average distance from an active input to\n *    the centroid.\n * @property {number} scale - The proportional change in distance since last\n * emit.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Pinch is defined as two or more inputs moving either together or apart.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.PinchData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=2] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {boolean} [options.applySmoothing=true] - Whether to apply inertial\n * smoothing for systems with coarse pointers.\n */\nclass Pinch extends Gesture {\n  constructor(element, handler, options = {}) {\n    options = { ...Pinch.DEFAULTS, ...options };\n    super('pinch', element, handler, options);\n\n    /**\n     * The previous distance.\n     *\n     * @type {number}\n     */\n    this.previous = 0;\n\n    /*\n     * The outgoing data, with optional inertial smoothing.\n     *\n     * @override\n     * @type {westures-core.Smoothable<number>}\n     */\n    this.outgoing = new Smoothable({ ...options, identity: 1 });\n  }\n\n  /**\n   * Initializes the gesture progress.\n   *\n   * @param {State} state - current input state.\n   */\n  restart(state) {\n    this.previous = state.centroid.averageDistanceTo(state.activePoints);\n    this.outgoing.restart();\n  }\n\n  start(state) {\n    this.restart(state);\n  }\n\n  move(state) {\n    const distance = state.centroid.averageDistanceTo(state.activePoints);\n    const scale = distance / this.previous;\n    this.previous = distance;\n    return { distance, scale: this.outgoing.next(scale) };\n  }\n\n  end(state) {\n    this.restart(state);\n  }\n\n  cancel(state) {\n    this.restart(state);\n  }\n}\n\nPinch.DEFAULTS = Object.freeze({\n  minInputs: 2,\n});\n\nmodule.exports = Pinch;\n\n","/*\n * Contains the Press class.\n */\n\n'use strict';\n\nconst { Gesture, Point2D, MOVE } = require('../core');\n\n/**\n * Data returned when a Press is recognized.\n *\n * @typedef {Object} PressData\n *\n * @property {westures-core.Point2D} centroid - The current centroid of the\n * input points.\n * @property {westures-core.Point2D} initial - The initial centroid of the input\n * points.\n * @property {number} distance - The total movement since initial contact.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Press is defined as one or more input points being held down without\n * moving. Press gestures may be stacked by pressing with additional pointers\n * beyond the minimum, so long as none of the points move or are lifted, a Press\n * will be recognized for each additional pointer.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.PressData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {number} [options.delay=1000] - The delay before emitting, during\n * which time the number of inputs must not go below minInputs.\n * @param {number} [options.tolerance=10] - The tolerance in pixels a user can\n * move and still allow the gesture to emit.\n */\nclass Press extends Gesture {\n  constructor(element, handler, options = {}) {\n    super('press', element, handler, { ...Press.DEFAULTS, ...options });\n  }\n\n  start(state) {\n    const initial = state.centroid;\n    const originalInputs = Array.from(state.active);\n    setTimeout(() => {\n      const inputs = state.active.filter(i => originalInputs.includes(i));\n      if (inputs.length === originalInputs.length) {\n        const centroid = Point2D.centroid(inputs.map(i => i.current.point));\n        const distance = initial.distanceTo(centroid);\n        if (distance <= this.options.tolerance) {\n          this.recognize(MOVE, state, { centroid, distance, initial });\n        }\n      }\n    }, this.options.delay);\n  }\n}\n\nPress.DEFAULTS = Object.freeze({\n  delay:     1000,\n  tolerance: 10,\n});\n\nmodule.exports = Press;\n\n","/*\n * Contains the abstract Pull class.\n */\n\n'use strict';\n\nconst { Smoothable } = require('../core');\nconst Pivotable = require('./Pivotable.js');\n\n/**\n * Data returned when a Pull is recognized.\n *\n * @typedef {Object} PullData\n * @mixes ReturnTypes.BaseData\n *\n * @property {number} distance - The average distance from an active input to\n * the centroid.\n * @property {number} scale - The proportional change in distance since last\n * emit.\n * @property {westures-core.Point2D} pivot - The pivot point.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Pull is defined as a single input moving away from or towards a pivot\n * point.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.PullData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {boolean} [options.applySmoothing=true] - Whether to apply inertial\n * smoothing for systems with coarse pointers.\n * @param {number} [options.deadzoneRadius=15] - The radius in pixels around the\n * start point in which to do nothing.\n * @param {Element} [options.dynamicPivot=false] - Normally the center point of\n * the gesture's element is used as the pivot. If this option is set, the\n * initial contact point with the element is used as the pivot instead.\n */\nclass Pull extends Pivotable {\n  constructor(element, handler, options = {}) {\n    super('pull', element, handler, options);\n\n    /*\n     * The outgoing data, with optional inertial smoothing.\n     *\n     * @override\n     * @type {westures-core.Smoothable<number>}\n     */\n    this.outgoing = new Smoothable({ ...options, identity: 1 });\n  }\n\n  updatePrevious(state) {\n    this.previous = this.pivot.distanceTo(state.centroid);\n  }\n\n  move(state) {\n    const pivot = this.pivot;\n    const distance = pivot.distanceTo(state.centroid);\n    const scale = distance / this.previous;\n    const { deadzoneRadius } = this.options;\n\n    let rv = null;\n    if (distance > deadzoneRadius && this.previous > deadzoneRadius) {\n      rv = { distance, scale: this.outgoing.next(scale), pivot };\n    }\n\n    /*\n     * Updating the previous distance regardless of emit prevents sudden changes\n     * when the user exits the deadzone circle.\n     */\n    this.previous = distance;\n\n    return rv;\n  }\n}\n\nmodule.exports = Pull;\n\n","/*\n * Contains the Rotate class.\n */\n\n'use strict';\n\nconst { Gesture, Point2D, Smoothable } = require('../core');\n\n/**\n * Data returned when a Pivotable is recognized.\n *\n * @typedef {Object} SwivelData\n * @mixes ReturnTypes.BaseData\n *\n * @property {number} rotation - In radians, the change in angle since last\n * emit.\n * @property {westures-core.Point2D} pivot - The pivot point.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Pivotable is a single input rotating around a fixed point. The fixed point\n * is determined by the input's location at its 'start' phase.\n *\n * @extends westures.Gesture\n * @see {ReturnTypes.SwivelData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {boolean} [options.applySmoothing=true] - Whether to apply inertial\n * smoothing for systems with coarse pointers.\n * @param {number} [options.deadzoneRadius=15] - The radius in pixels around the\n * start point in which to do nothing.\n * @param {Element} [options.dynamicPivot=false] - Normally the center point of\n * the gesture's element is used as the pivot. If this option is set, the\n * initial contact point with the element is used as the pivot instead.\n */\nclass Pivotable extends Gesture {\n  constructor(type = 'pivotable', element, handler, options = {}) {\n    super(type, element, handler, { ...Pivotable.DEFAULTS, ...options });\n\n    /**\n     * The pivot point of the pivotable.\n     *\n     * @type {westures-core.Point2D}\n     */\n    this.pivot = null;\n\n    /**\n     * The previous data.\n     *\n     * @type {number}\n     */\n    this.previous = 0;\n\n    /**\n     * The outgoing data.\n     *\n     * @type {westures-core.Smoothable}\n     */\n    this.outgoing = new Smoothable(options);\n  }\n\n  /**\n   * Determine the center point of the given element's bounding client\n   * rectangle.\n   *\n   * @static\n   *\n   * @param {Element} element - The DOM element to analyze.\n   * @return {westures-core.Point2D} - The center of the element's bounding\n   * client rectangle.\n   */\n  static getClientCenter(element) {\n    const rect = element.getBoundingClientRect();\n    return new Point2D(\n      rect.left + (rect.width / 2),\n      rect.top + (rect.height / 2),\n    );\n  }\n\n  /**\n   * Updates the previous data. It will be called during the 'start' and 'end'\n   * phases, and should also be called during the 'move' phase implemented by\n   * the subclass.\n   *\n   * @abstract\n   * @param {State} state - the current input state.\n   */\n  updatePrevious() {\n    throw 'Gestures which extend Pivotable must implement updatePrevious()';\n  }\n\n  /**\n   * Restart the given progress object using the given input object.\n   *\n   * @param {State} state - current input state.\n   */\n  restart(state) {\n    if (this.options.dynamicPivot) {\n      this.pivot = state.centroid;\n      this.previous = 0;\n    } else {\n      this.pivot = Pivotable.getClientCenter(this.element);\n      this.updatePrevious(state);\n    }\n    this.outgoing.restart();\n  }\n\n  start(state) {\n    this.restart(state);\n  }\n\n  end(state) {\n    if (state.active.length > 0) {\n      this.restart(state);\n    } else {\n      this.outgoing.restart();\n    }\n  }\n\n  cancel() {\n    this.outgoing.restart();\n  }\n}\n\nPivotable.DEFAULTS = Object.freeze({\n  deadzoneRadius: 15,\n  dynamicPivot:   false,\n});\n\nmodule.exports = Pivotable;\n","/*\n * Contains the Rotate class.\n */\n\n'use strict';\n\nconst { angularDifference, Gesture, Smoothable } = require('../core');\n\n/**\n * Data returned when a Rotate is recognized.\n *\n * @typedef {Object} RotateData\n * @mixes ReturnTypes.BaseData\n *\n * @property {number} rotation - In radians, the change in angle since last\n * emit.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Rotate is defined as two inputs moving with a changing angle between them.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.RotateData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=2] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {boolean} [options.applySmoothing=true] - Whether to apply inertial\n * smoothing for systems with coarse pointers.\n */\nclass Rotate extends Gesture {\n  constructor(element, handler, options = {}) {\n    options = { ...Rotate.DEFAULTS, ...options };\n    super('rotate', element, handler, options);\n\n    /**\n     * Track the previous angles for each input.\n     *\n     * @type {number[]}\n     */\n    this.previousAngles = [];\n\n    /*\n     * The outgoing data, with optional inertial smoothing.\n     *\n     * @override\n     * @type {westures-core.Smoothable<number>}\n     */\n    this.outgoing = new Smoothable(options);\n  }\n\n  /**\n   * Restart the gesture for a new number of inputs.\n   *\n   * @param {State} state - current input state.\n   */\n  restart(state) {\n    this.previousAngles = state.centroid.anglesTo(state.activePoints);\n    this.outgoing.restart();\n  }\n\n  start(state) {\n    this.restart(state);\n  }\n\n  move(state) {\n    const stagedAngles = state.centroid.anglesTo(state.activePoints);\n    const angle = stagedAngles.reduce((total, current, index) => {\n      return total + angularDifference(current, this.previousAngles[index]);\n    }, 0);\n    this.previousAngles = stagedAngles;\n    const rotation = angle / state.activePoints.length;\n    return { rotation: this.outgoing.next(rotation) };\n  }\n\n  end(state) {\n    this.restart(state);\n  }\n\n  cancel() {\n    this.outgoing.restart();\n  }\n}\n\nRotate.DEFAULTS = Object.freeze({\n  minInputs: 2,\n});\n\nmodule.exports = Rotate;\n\n","/*\n * Contains the Swipe class.\n */\n\n'use strict';\n\nconst { Gesture } = require('../core');\n\nconst PROGRESS_STACK_SIZE = 7;\nconst MS_THRESHOLD = 300;\n\n/**\n * Data returned when a Swipe is recognized.\n *\n * @typedef {Object} SwipeData\n * @mixes ReturnTypes.BaseData\n *\n * @property {number} velocity - The velocity of the swipe.\n * @property {number} direction - In radians, the direction of the swipe.\n * @property {westures-core.Point2D} point - The point at which the swipe ended.\n * @property {number} time - The epoch time, in ms, when the swipe ended.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A swipe is defined as input(s) moving in the same direction in an relatively\n * increasing velocity and leaving the screen at some point before it drops\n * below it's escape velocity.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.SwipeData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n */\nclass Swipe extends Gesture {\n  constructor(element, handler, options = {}) {\n    super('swipe', element, handler, options);\n\n    /**\n     * Moves list.\n     *\n     * @type {object[]}\n     */\n    this.moves = [];\n\n    /**\n     * Data to emit when all points have ended.\n     *\n     * @type {ReturnTypes.SwipeData}\n     */\n    this.saved = null;\n  }\n\n  /**\n   * Restart the swipe state for a new numper of inputs.\n   */\n  restart() {\n    this.moves = [];\n    this.saved = null;\n  }\n\n  start() {\n    this.restart();\n  }\n\n  move(state) {\n    this.moves.push({\n      time:  Date.now(),\n      point: state.centroid,\n    });\n\n    if (this.moves.length > PROGRESS_STACK_SIZE) {\n      this.moves.splice(0, this.moves.length - PROGRESS_STACK_SIZE);\n    }\n  }\n\n  end(state) {\n    const result = this.getResult();\n    this.moves = [];\n\n    if (state.active.length > 0) {\n      this.saved = result;\n      return null;\n    }\n\n    this.saved = null;\n    return Swipe.validate(result);\n  }\n\n  cancel() {\n    this.restart();\n  }\n\n  /**\n   * Get the swipe result.\n   *\n   * @returns {?ReturnTypes.SwipeData}\n   */\n  getResult() {\n    if (this.moves.length < PROGRESS_STACK_SIZE) {\n      return this.saved;\n    }\n    const vlim = PROGRESS_STACK_SIZE - 1;\n    const { point, time } = this.moves[vlim];\n    const velocity = Swipe.calc_velocity(this.moves, vlim);\n    const direction = Swipe.calc_angle(this.moves, vlim);\n    const centroid = point;\n    return { point, velocity, direction, time, centroid };\n  }\n\n  /**\n   * Validates that an emit should occur with the given data.\n   *\n   * @static\n   * @param {?ReturnTypes.SwipeData} data\n   * @returns {?ReturnTypes.SwipeData}\n   */\n  static validate(data) {\n    if (data == null) return null;\n    return (Date.now() - data.time > MS_THRESHOLD) ? null : data;\n  }\n\n  /**\n   * Calculates the angle of movement along a series of moves.\n   *\n   * @static\n   * @see {@link https://en.wikipedia.org/wiki/Mean_of_circular_quantities}\n   *\n   * @param {{time: number, point: westures-core.Point2D}} moves - The moves\n   * list to process.\n   * @param {number} vlim - The number of moves to process.\n   *\n   * @return {number} The angle of the movement.\n   */\n  static calc_angle(moves, vlim) {\n    const point = moves[vlim].point;\n    let sin = 0;\n    let cos = 0;\n    for (let i = 0; i < vlim; ++i) {\n      const angle = moves[i].point.angleTo(point);\n      sin += Math.sin(angle);\n      cos += Math.cos(angle);\n    }\n    sin /= vlim;\n    cos /= vlim;\n    return Math.atan2(sin, cos);\n  }\n\n  /**\n   * Local helper function for calculating the velocity between two timestamped\n   * points.\n   *\n   * @static\n   * @param {object} start\n   * @param {westures-core.Point2D} start.point\n   * @param {number} start.time\n   * @param {object} end\n   * @param {westures-core.Point2D} end.point\n   * @param {number} end.time\n   *\n   * @return {number} velocity from start to end point.\n   */\n  static velocity(start, end) {\n    const distance = end.point.distanceTo(start.point);\n    const time = end.time - start.time + 1;\n    return distance / time;\n  }\n\n  /**\n   * Calculates the veloctiy of movement through a series of moves.\n   *\n   * @static\n   * @param {{time: number, point: westures-core.Point2D}} moves - The moves\n   * list to process.\n   * @param {number} vlim - The number of moves to process.\n   *\n   * @return {number} The velocity of the moves.\n   */\n  static calc_velocity(moves, vlim) {\n    let max = 0;\n    for (let i = 0; i < vlim; ++i) {\n      const current = Swipe.velocity(moves[i], moves[i + 1]);\n      if (current > max) max = current;\n    }\n    return max;\n  }\n}\n\nmodule.exports = Swipe;\n\n","/*\n * Contains the Rotate class.\n */\n\n'use strict';\n\nconst { angularDifference, Smoothable } = require('../core');\nconst Pivotable = require('./Pivotable.js');\n\n/**\n * Data returned when a Swivel is recognized.\n *\n * @typedef {Object} SwivelData\n * @mixes ReturnTypes.BaseData\n *\n * @property {number} rotation - In radians, the change in angle since last\n * emit.\n * @property {westures-core.Point2D} pivot - The pivot point.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Swivel is a single input rotating around a fixed point. The fixed point is\n * determined by the input's location at its 'start' phase.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.SwivelData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {boolean} [options.applySmoothing=true] - Whether to apply inertial\n * smoothing for systems with coarse pointers.\n * @param {number} [options.deadzoneRadius=15] - The radius in pixels around the\n * start point in which to do nothing.\n * @param {Element} [options.dynamicPivot=false] - Normally the center point of\n * the gesture's element is used as the pivot. If this option is set, the\n * initial contact point with the element is used as the pivot instead.\n */\nclass Swivel extends Pivotable {\n  constructor(element, handler, options = {}) {\n    super('swivel', element, handler, options);\n\n    /*\n     * The outgoing data, with optional inertial smoothing.\n     *\n     * @override\n     * @type {westures-core.Smoothable<number>}\n     */\n    this.outgoing = new Smoothable(options);\n  }\n\n  updatePrevious(state) {\n    this.previous = this.pivot.angleTo(state.centroid);\n  }\n\n  move(state) {\n    const pivot = this.pivot;\n    const angle = pivot.angleTo(state.centroid);\n    const rotation = angularDifference(angle, this.previous);\n\n    let rv = null;\n    if (pivot.distanceTo(state.centroid) > this.options.deadzoneRadius) {\n      rv = { rotation: this.outgoing.next(rotation), pivot };\n    }\n\n    /*\n     * Updating the previous angle regardless of emit prevents sudden flips when\n     * the user exits the deadzone circle.\n     */\n    this.previous = angle;\n\n    return rv;\n  }\n}\n\nmodule.exports = Swivel;\n\n","/*\n * Contains the Tap class.\n */\n\n'use strict';\n\nconst { Gesture, Point2D } = require('../core');\n\n/**\n * Data returned when a Tap is recognized.\n *\n * @typedef {Object} TapData\n * @mixes ReturnTypes.BaseData\n *\n * @property {number} x - x coordinate of tap point.\n * @property {number} y - y coordinate of tap point.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Tap is defined as a touchstart to touchend event in quick succession.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.TapData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {number} [options.minDelay=0] - The minimum delay between a touchstart\n * and touchend can be configured in milliseconds.\n * @param {number} [options.maxDelay=300] - The maximum delay between a\n * touchstart and touchend can be configured in milliseconds.\n * @param {number} [options.maxRetain=300] - The maximum time after a tap ends\n * before it is discarded can be configured in milliseconds. Useful for\n * multi-tap gestures, to allow things like slow \"double clicks\".\n * @param {number} [options.numTaps=1] - Number of taps to require.\n * @param {number} [options.tolerance=10] - The tolerance in pixels an input can\n * move before it will no longer be considered part of a tap.\n */\nclass Tap extends Gesture {\n  constructor(element, handler, options = {}) {\n    super('tap', element, handler, { ...Tap.DEFAULTS, ...options });\n\n    /**\n     * An array of inputs that have ended recently.\n     *\n     * @type {Input[]}\n     */\n    this.taps = [];\n  }\n\n  end(state) {\n    const now = Date.now();\n    const { minDelay, maxDelay, maxRetain, numTaps, tolerance } = this.options;\n\n    // Save the recently ended inputs as taps.\n    this.taps = this.taps.concat(state.getInputsInPhase('end'))\n      .filter(input => {\n        const elapsed = input.elapsedTime;\n        const tdiff = now - input.current.time;\n        return (\n          elapsed <= maxDelay\n          && elapsed >= minDelay\n          && tdiff <= maxRetain\n        );\n      });\n\n    // Validate the list of taps.\n    if (this.taps.length !== numTaps ||\n      this.taps.some(i => i.totalDistance() > tolerance)) {\n      return null;\n    }\n\n    const centroid = Point2D.centroid(this.taps.map(i => i.current.point));\n    this.taps = []; // Critical! Used taps need to be cleared!\n    return { centroid, ...centroid };\n  }\n}\n\nTap.DEFAULTS = Object.freeze({\n  minDelay:  0,\n  maxDelay:  300,\n  maxRetain: 300,\n  numTaps:   1,\n  tolerance: 10,\n});\n\nmodule.exports = Tap;\n\n","/*\n * Contains the Track class.\n */\n\n'use strict';\n\nconst { Gesture } = require('../core');\n\n/**\n * Data returned when a Track is recognized.\n *\n * @typedef {Object} TrackData\n * @mixes ReturnTypes.BaseData\n *\n * @property {westures-core.Point2D[]} active - Points currently in 'start' or\n *    'move' phase.\n *\n * @memberof ReturnTypes\n */\n\n/**\n * A Track gesture forwards a list of active points and their centroid on each\n * of the selected phases.\n *\n * @extends westures-core.Gesture\n * @see {ReturnTypes.TrackData}\n * @memberof westures\n *\n * @param {Element} element - The element to which to associate the gesture.\n * @param {Function} handler - The function handler to execute when a gesture\n * is recognized on the associated element.\n * @param {object} [options] - Gesture customization options.\n * @param {westures-core.STATE_KEYS[]} [options.enableKeys=[]] - List of keys\n * which will enable the gesture. The gesture will not be recognized unless one\n * of these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the enable key is always down.\n * @param {westures-core.STATE_KEYS[]} [options.disableKeys=[]] - List of keys\n * which will disable the gesture. The gesture will not be recognized if one of\n * these keys is pressed while the interaction occurs. If not specified or an\n * empty list, the gesture is treated as though the disable key is never down.\n * @param {number} [options.minInputs=1] - The minimum number of pointers that\n * must be active for the gesture to be recognized. Uses >=.\n * @param {number} [options.maxInputs=Number.MAX_VALUE] - The maximum number of\n * pointers that may be active for the gesture to be recognized. Uses <=.\n * @param {string[]} [options.phases=[]] Phases to recognize. Entries can be any\n * or all of 'start', 'move', 'end', and 'cancel'.\n */\nclass Track extends Gesture {\n  constructor(element, handler, options = {}) {\n    super('track', element, handler, { ...Track.DEFAULTS, ...options });\n  }\n\n  /**\n   * Filters out the state's data, down to what should be emitted.\n\n   * @param {State} state - current input state.\n   * @return {ReturnTypes.TrackData}\n   */\n  data({ activePoints }) {\n    return { active: activePoints };\n  }\n\n  tracks(phase) {\n    return this.options.phases.includes(phase);\n  }\n\n  start(state) {\n    return this.tracks('start') ? this.data(state) : null;\n  }\n\n  move(state) {\n    return this.tracks('move') ? this.data(state) : null;\n  }\n\n  end(state) {\n    return this.tracks('end') ? this.data(state) : null;\n  }\n\n  cancel(state) {\n    return this.tracks('cancel') ? this.data(state) : null;\n  }\n}\n\nTrack.DEFAULTS = Object.freeze({\n  phases: Object.freeze([]),\n});\n\nmodule.exports = Track;\n\n","/**\n * The API interface for Westures. Defines a number of gestures on top of the\n * engine provided by {@link\n * https://mvanderkamp.github.io/westures-core/index.html|westures-core}.\n *\n * @namespace westures\n */\n\n'use strict';\n\nconst core = require('./core');\n\nconst Pan     = require('./src/Pan.js');\nconst Pinch   = require('./src/Pinch.js');\nconst Press   = require('./src/Press.js');\nconst Pull    = require('./src/Pull.js');\nconst Rotate  = require('./src/Rotate.js');\nconst Swipe   = require('./src/Swipe.js');\nconst Swivel  = require('./src/Swivel.js');\nconst Tap     = require('./src/Tap.js');\nconst Track   = require('./src/Track.js');\n\nmodule.exports = {\n  Pan,\n  Pinch,\n  Press,\n  Pull,\n  Rotate,\n  Swipe,\n  Swivel,\n  Tap,\n  Track,\n  ...core,\n};\n\n/**\n * Here are the return \"types\" of the gestures that are included in this\n * package.\n *\n * @namespace ReturnTypes\n */\n\n/**\n * The base data that is included for all emitted gestures.\n *\n * @typedef {Object} BaseData\n *\n * @property {westures-core.Point2D} centroid - The centroid of the input\n * points.\n * @property {Event} event - The input event which caused the gesture to be\n * recognized.\n * @property {string} phase - 'start', 'move', 'end', or 'cancel'.\n * @property {number} radius - The distance of the furthest input to the\n * centroid.\n * @property {string} type - The name of the gesture as specified by its\n * designer.\n * @property {Element} target - The bound target of the gesture.\n *\n * @memberof ReturnTypes\n */\n\n","'use strict';\n\n// const Westures = require('../../../westures');\nconst Westures = require('westures');\n\nconst { NOP } = require('../shared.js');\n\n/**\n * The Interactor class provides a layer of abstraction between the\n * ClientController and the code that processes user inputs.  Data from\n * recognized gestures is reported directly through to the handlers. The\n * handlers are initialized to NOPs so that the functions which call the\n * handlers don't need to check whether the handler exists.\n *\n * Currently, the Interactor makes use of the Westures library.\n *\n * @memberof module:client\n *\n * @see {@link https://mvanderkamp.github.io/westures/}\n *\n * @param {Object} handlers - Object with keys as the names gestures and values\n *    as the corresponding function for handling that gesture when it is\n *    recognized.\n * @param {Function} [handlers.swipe=NOP]\n * @param {Function} [handlers.tap=NOP]\n * @param {Function} [handlers.track=NOP]\n * @param {Function} [handlers.transform=NOP]\n */\nclass Interactor {\n  constructor(root, handlers = {}) {\n    /**\n     * Object holding the handlers, so they can be dynamically referenced by\n     * name.\n     *\n     * @type {Object}\n     * @property {Function} [swipe=NOP]\n     * @property {Function} [tap=NOP]\n     * @property {Function} [track=NOP]\n     * @property {Function} [transform=NOP]\n     */\n    this.handlers = { ...Interactor.DEFAULT_HANDLERS, ...handlers };\n\n    /**\n     * Object to coalesce state from multiple gestures during one event cycle.\n     *\n     * @type {Object}\n     */\n    this._changes = this._resetChanges()\n    this._scheduled = false;\n\n    // Begin listening activities immediately.\n    this.bindRegions(root);\n    window.addEventListener('wheel', this.wheel.bind(this), false);\n  }\n\n  /**\n   * Westures uses Gesture objects, and expects those objects to be bound to an\n   * element, along with a handler for responding to that gesture. This method\n   * takes care of those activities.\n   */\n  bindRegions(root) {\n    const pan = new Westures.Pan(root, this.coalesce.bind(this), { disableKeys: ['ctrlKey'] });\n    const pinch = new Westures.Pinch(root, this.coalesce.bind(this));\n    const rotate = new Westures.Rotate(root, this.coalesce.bind(this));\n    const swipe = new Westures.Swipe(root, this.handlers.swipe);\n    const swivel = new Westures.Swivel(root, this.swivel.bind(this), { enableKeys: ['ctrlKey'] });\n    const tap = new Westures.Tap(root, this.handlers.tap);\n    const track = new Westures.Track(root, this.handlers.track, { phases: ['start', 'end'] });\n\n    const region = new Westures.Region(root);\n    region.addGesture(pan);\n    region.addGesture(pinch);\n    region.addGesture(rotate);\n    region.addGesture(tap);\n    region.addGesture(swipe);\n    region.addGesture(swivel);\n    region.addGesture(track);\n  }\n\n  _resetChanges() {\n    return {\n      centroid: { x: 0, y: 0 },\n      delta: {\n        scale: 1,\n        rotation: 0,\n        translation: { x: 0, y: 0 },\n      },\n    }\n  }\n\n  /**\n   * Coalesce state changes for this event cycle.\n   */\n  coalesce(data) {\n    this._changes.centroid = data.centroid;\n    if (data.scale) {\n      this._changes.delta.scale *= data.scale;\n    }\n    if (data.rotation) {\n      this._changes.delta.rotation += data.rotation;\n    }\n    if (data.translation) {\n      this._changes.delta.translation.x += data.translation.x;\n      this._changes.delta.translation.y += data.translation.y;\n    }\n    if (!this._scheduled) {\n      window.setTimeout(this._emit.bind(this), 0);\n      this._scheduled = true;\n    }\n  }\n\n  /**\n   * Emit a transform event with the coalesced state changes.\n   */\n  _emit() {\n    this.handlers.transform(this._changes);\n    this._changes = this._resetChanges()\n    this._scheduled = false;\n  }\n\n  /**\n   * Send a swivel event through as a transformation.\n   */\n  swivel({ rotation, pivot }) {\n    this.handlers.transform({\n      centroid: pivot,\n      delta: { rotation },\n    });\n  }\n\n  /**\n   * Treat scrollwheel events as zoom events.\n   *\n   * @param {WheelEvent} event - The wheel event from the window.\n   */\n  wheel(event) {\n    event.preventDefault();\n    const factor = event.ctrlKey ? 0.02 : 0.1;\n    const scale = -(Math.sign(event.deltaY) * factor) + 1;\n    const centroid = { x: event.clientX, y: event.clientY };\n    this.handlers.transform({ centroid, delta: { scale } });\n  }\n}\n\n/**\n * The default handlers used by the Interactor.\n *\n * @type {object}\n */\nInteractor.DEFAULT_HANDLERS = Object.freeze({\n  swipe: NOP,\n  tap: NOP,\n  track: NOP,\n  transform: NOP,\n});\n\nmodule.exports = Interactor;\n","'use strict';\n\nconst { Point2D, IdStamper, WamsElement } = require('../shared.js');\n\n/**\n * The ClientElement class exposes the draw() funcitonality of wams elements.\n *\n * @extends module:shared.WamsElement\n * @memberof module:client\n *\n * @param {module:shared.WamsElement} data - The data from the server describing\n * this item. Only properties explicity listed in the array passed to the\n * ReporterFactory when the WamsElement class was defined will be accepted.\n */\nclass ClientElement extends WamsElement {\n  constructor(data) {\n    super(data);\n\n    /**\n     * Root element where WAMS canvas and HTML elements are located.\n     *\n     * @type {Element}\n     */\n    const root = document.querySelector('#root');\n\n    /**\n     * The DOM element.\n     *\n     * @type {Element}\n     */\n    this.element = document.createElement(data.tagname);\n    this.element.classList.add('wams-element');\n    this.element.width = this.width;\n    this.element.height = this.height;\n    this.element.style.width = `${this.width}px`;\n    this.element.style.height = `${this.height}px`;\n    root.appendChild(this.element);\n    if (Object.prototype.hasOwnProperty.call(data, 'attributes')) {\n      this.setAttributes(data.attributes);\n    }\n\n    /**\n     * Id to make the items uniquely identifiable.\n     *\n     * @name id\n     * @type {number}\n     * @constant\n     * @instance\n     * @memberof module:client.ClientElement\n     */\n    IdStamper.cloneId(this, data.id);\n  }\n\n  /**\n   * Render the element. Really just updates the rotation and transformation\n   * matrix.\n   *\n   * @param {CanvasRenderingContext2D} context\n   * @param {module:client.ClientView} view\n   */\n  draw(context, view) {\n    const tl = new Point2D(this.x - view.x, this.y - view.y).divideBy(this.scale).rotate(this.rotation);\n    const rotate = `rotate(${view.rotation - this.rotation}rad) `;\n    const scale = `scale(${this.scale * view.scale}) `;\n    const translate = `translate(${tl.x}px, ${tl.y}px) `;\n    this.element.style.transform = scale + rotate + translate;\n  }\n\n  /**\n   * Sets attributes for the element.\n   *\n   * @param {object} attributes\n   */\n  setAttributes(attributes) {\n    this.attributes = attributes;\n    Object.entries(attributes).forEach(([k, v]) => {\n      this.element[k] = v;\n    });\n  }\n\n  /**\n   * Set parent ServerGroup for the element.\n   *\n   * @param {module:server:ServerGroup} parent server group for this element\n   */\n  setParent(parent) {\n    this.parent = parent;\n  }\n\n  /**\n   * Removes attributes from the element.\n   *\n   * @param {string[]} attributes\n   */\n  removeAttributes(attributes) {\n    attributes.forEach((attr) => {\n      delete this.attributes[attr];\n      this.element[attr] = null;\n    });\n  }\n}\n\nmodule.exports = ClientElement;\n","'use strict';\n\nconst { IdStamper, WamsImage, Message } = require('../shared.js');\n\n/**\n * Abstraction of the requisite logic for generating an image object which will\n * load the appropriate image and report when it has finished loading the image\n * so that it can be displayed.\n *\n * @inner\n * @memberof module:client.ClientImage\n *\n * @param {string} src - Image source path.\n *\n * @returns {?Image}\n */\nfunction createImage(src) {\n  if (src) {\n    const img = new Image();\n    img.src = src;\n    img.loaded = false;\n    img.addEventListener(\n      'load',\n      () => {\n        img.loaded = true;\n        document.dispatchEvent(new CustomEvent(Message.IMG_LOAD));\n      },\n      { once: true }\n    );\n    return img;\n  }\n  return {};\n}\n\n/**\n * The ClientImage class exposes the draw() funcitonality of wams items.\n *\n * @extends module:shared.WamsImage\n * @memberof module:client\n *\n * @param {module:shared.Item} data - The data from the server describing this\n * item. Only properties explicity listed in the array passed to the\n * ReporterFactory when the Item class was defined will be accepted.\n */\nclass ClientImage extends WamsImage {\n  constructor(data) {\n    super(data);\n\n    /**\n     * The image to render.\n     *\n     * @type {Image}\n     */\n    this.image = {};\n    if (data.src) this.setImage(data.src);\n\n    /**\n     * Id to make the items uniquely identifiable.\n     *\n     * @name id\n     * @type {number}\n     * @constant\n     * @instance\n     * @memberof module:client.ClientImage\n     */\n    IdStamper.cloneId(this, data.id);\n  }\n\n  /**\n   * Render the image onto the given context.\n   *\n   * @param {CanvasRenderingContext2D} context\n   */\n  draw(context) {\n    context.save();\n    context.translate(this.x, this.y);\n    context.rotate(-this.rotation);\n    context.scale(this.scale, this.scale);\n    if (this.image.loaded) {\n      context.drawImage(this.image, 0, 0, this.width, this.height);\n    } else {\n      context.fillStyle = 'darkgrey';\n      context.fillRect(0, 0, this.width, this.height);\n    }\n    context.restore();\n  }\n\n  /**\n   * Set parent ServerGroup for the image.\n   *\n   * @param {module:server:ServerGroup} parent server group for this image\n   */\n  setParent(parent) {\n    this.parent = parent;\n  }\n\n  /**\n   * Sets the image path and loads the image.\n   *\n   * @param {string} path - The image's source path\n   */\n  setImage(path) {\n    this.src = path;\n    this.image = createImage(path);\n  }\n}\n\nmodule.exports = ClientImage;\n","'use strict';\n\nconst { IdStamper, Item } = require('../shared.js');\nconst { CanvasSequence } = require('canvas-sequencer');\n\n/**\n * The ClientItem class exposes the draw() funcitonality of wams items.\n *\n * @extends module:shared.Item\n * @memberof module:client\n *\n * @param {module:shared.Item} data - The data from the server describing this\n * item. Only properties explicity listed in the array passed to the\n * ReporterFactory when the Item class was defined will be accepted.\n */\nclass ClientItem extends Item {\n  constructor(data) {\n    super(data);\n\n    /**\n     * The actual render.\n     *\n     * @type {CanvasSequence}\n     */\n    this.render = null;\n    if (data.sequence) this.setRender(data.sequence);\n\n    /**\n     * Id to make the items uniquely identifiable.\n     *\n     * @name id\n     * @type {number}\n     * @constant\n     * @instance\n     * @memberof module:client.ClientItem\n     */\n    IdStamper.cloneId(this, data.id);\n  }\n\n  /**\n   * Render the item onto the given context.\n   *\n   * @param {CanvasRenderingContext2D} context\n   */\n  draw(context) {\n    if (this.render) {\n      context.save();\n      context.translate(this.x, this.y);\n      context.rotate(-this.rotation);\n      context.scale(this.scale, this.scale);\n      this.render.execute(context);\n      context.restore();\n    }\n  }\n\n  /**\n   * Set parent ServerGroup for the item.\n   *\n   * @param {module:server:ServerGroup} parent server group for this item\n   */\n  setParent(parent) {\n    this.parent = parent;\n  }\n\n  /**\n   * Set the item's canvas rendering sequence.\n   *\n   * @param {CanvasSequence} sequence - Raw, unrevived CanvasSequence.\n   */\n  setRender(sequence) {\n    this.render = new CanvasSequence(sequence);\n  }\n}\n\nmodule.exports = ClientItem;\n","/*\n * Author: Michael van der Kamp\n * Date: July/August, 2018\n *\n * This file defines the low level 'CanvasAtom' for use by a CanvasSequence.\n *\n * A CanvasAtom is a unit of execution in a CanvasSequence. It comes in two\n * flavours: one for describing a method call, one for describing a property\n * assignment.\n */\n\n'use strict';\n\n/**\n * The types of CanvasAtoms that are available.\n *\n * @enum {string}\n * @readonly\n * @lends CanvasAtom\n */\nconst TYPES = {\n  /** @const */ METHOD:   'method',\n  /** @const */ PROPERTY: 'property',\n};\n\n/**\n * Internal common constructor definition for Canvas Atoms.\n *\n * @param {string} inst - The canvas context instruction.\n * @param {*[]} args - The arguments to the instruction.\n */\nclass Atom {\n  constructor(inst, args) {\n    /**\n     * The canvas context instruction.\n     *\n     * @private\n     * @type {string}\n     */\n    this.inst = inst;\n\n    /**\n     * The arguments to the instruction.\n     *\n     * @private\n     * @type {*[]}\n     */\n    this.args = args;\n  }\n}\n\n/**\n * A MethodCanvasAtom is used for canvas context methods. The arguments will be\n * treated as an actual array, all of which will be passed to the method when\n * the atom is executed.\n *\n * @extends Atom\n */\nclass MethodCanvasAtom extends Atom {\n  constructor(inst, args) {\n    super(inst, args);\n\n    /**\n     * The type of atom.\n     *\n     * @private\n     * @type {string}\n     */\n    this.type = TYPES.METHOD;\n  }\n\n  /**\n   * Execute the atom on the given context.\n   *\n   * @param {CanvasRenderingContext2D} context\n   */\n  execute(context) {\n    context[this.inst](...this.args);\n  }\n}\n\n/**\n * A PropertyCanvasAtom is used for canvas context properties (a.k.a. fields).\n * Only the first argument will be used, and will be the value assigned to the\n * field.\n *\n * @extends Atom\n */\nclass PropertyCanvasAtom extends Atom {\n  constructor(inst, args) {\n    super(inst, args);\n    this.type = TYPES.PROPERTY;\n  }\n\n  /**\n   * Execute the atom on the given context.\n   *\n   * @param {CanvasRenderingContext2D} context\n   */\n  execute(context) {\n    context[this.inst] = this.args[0];\n  }\n}\n\n/*\n * This object is for demultiplexing types in the CanvasAtom constructor.\n * Defined outside the constructor so it doesn't need to be redefined every\n * time a new atom is constructed. Defined outside the class so that it is not\n * externally exposed.\n */\nconst atomOf = {\n  [TYPES.METHOD]:   MethodCanvasAtom,\n  [TYPES.PROPERTY]: PropertyCanvasAtom,\n};\n\n/**\n * The exposed CanvasAtom class. Results in the instantiation of either a\n * MethodCanvasAtom or a PropertyCanvasAtom, depending on the given type.\n *\n * @param {string} type - Either CanvasAtom.METHOD or CanvasAtom.PROPERTY.\n * @param {string} inst - The canvas context instruction.\n * @param {*[]} args - The arguments to the instruction.\n */\nclass CanvasAtom {\n  constructor(type, inst, args) {\n    return new atomOf[type](inst, args);\n  }\n}\n\n/*\n * Define the types once locally, but make them available externally as\n * immutable properties on the class.\n */\nObject.entries(TYPES).forEach(([p, v]) => {\n  Object.defineProperty(CanvasAtom, p, {\n    value:        v,\n    configurable: false,\n    enumerable:   true,\n    writable:     false,\n  });\n});\n\nmodule.exports = CanvasAtom;\n\n","/*\n * Author: Michael van der Kamp\n * Date: July/August, 2018\n *\n * This file provides the definition of the CanvasSequence class.\n */\n\n'use strict';\n\nconst CanvasAtom = require('./CanvasAtom.js');\n\nconst locals = Object.freeze({\n  METHODS: [\n    'addHitRegion',\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearHitRegions',\n    'clearRect',\n    'clip',\n    'closePath',\n    'drawFocusIfNeeded',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillRect',\n    'fillText',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'removeHitRegion',\n    'resetTransform',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'scrollPathIntoView',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeRect',\n    'strokeText',\n    'transform',\n    'translate',\n  ],\n\n  PROPERTIES: [\n    'direction',\n    'fillStyle',\n    'filter',\n    'font',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n    'imageSmoothingQuality',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'shadowBlur',\n    'shadowColor',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'strokeStyle',\n    'textAlign',\n    'textBaseline',\n  ],\n});\n\n// Mark properties as intended for internal use.\nconst symbols = Object.freeze({\n  sequence: Symbol.for('sequence'),\n  push:     Symbol.for('push'),\n  fromJSON: Symbol.for('fromJSON'),\n});\n\n/**\n * A CanvasSequence is a linear collection of CanvasAtoms, capable of being\n * executed on a CanvasRenderingContext2D.\n *\n * @param {CanvasSequence} [data=null] - An unrevived (i.e. freshly transmitted)\n * CanvasSequence. If present, the constructor revives the sequence. Note that\n * an already revived CanvasSequence cannot be used as the argument here.\n */\nclass CanvasSequence {\n  constructor(data = null) {\n    /**\n     * The CanvasAtoms that form the sequence.\n     *\n     * @private\n     * @type {CanvasAtom[]}\n     */\n    this[symbols.sequence] = [];\n\n    // If data is present, assume it is a CanvasSequence that needs reviving.\n    if (data) this[symbols.fromJSON](data);\n  }\n\n  /**\n   * Revive the sequence from transmitted JSON data.\n   *\n   * @private\n   * @param {CanvasSequence} [data={}]\n   */\n  [symbols.fromJSON](data = { sequence: [] }) {\n    data.sequence.forEach(({ type, inst, args }) => {\n      this[symbols.push](type, inst, args);\n    });\n  }\n\n  /**\n   * Push a new CanvasAtom onto the end of the sequence.\n   *\n   * @private\n   * @param {string} type - The type of CanvasAtom to push.\n   * @param {string} inst - The canvas context instruction.\n   * @param {*[]} args - The arguments to the canvas context instruction.\n   */\n  [symbols.push](type, inst, args) {\n    this[symbols.sequence].push(new CanvasAtom(type, inst, args));\n  }\n\n  /**\n   * Execute the sequence on the given context.\n   *\n   * @param {CanvasRenderingContext2D} context\n   */\n  execute(context) {\n    context.save();\n    this[symbols.sequence].forEach(a => a.execute(context));\n    context.restore();\n  }\n\n  /**\n   * Export a JSON serialized version of the sequence, ready for transmission.\n   *\n   * @return {CanvasSequence} In JSON serialized form.\n   */\n  toJSON() {\n    return { sequence: this[symbols.sequence] };\n  }\n}\n\nlocals.METHODS.forEach(m => {\n  Object.defineProperty(CanvasSequence.prototype, m, {\n    value: function pushMethodCall(...args) {\n      this[symbols.push](CanvasAtom.METHOD, m, args);\n    },\n    writable:     false,\n    enumerable:   true,\n    configurable: false,\n  });\n});\n\nlocals.PROPERTIES.forEach(p => {\n  Object.defineProperty(CanvasSequence.prototype, p, {\n    get()  { throw `Invalid canvas sequencer interaction, cannot get ${p}.`; },\n    set(v) { this[symbols.push](CanvasAtom.PROPERTY, p, [v]); },\n    enumerable:   true,\n    configurable: false,\n  });\n});\n\nmodule.exports = CanvasSequence;\n\n","/*\n * Author: Michael van der Kamp\n * Date: July/August, 2018\n *\n * Thie file provides the definition of the CanvasBlueprint class.\n *\n * A CanvasBlueprint is similar to a plain CanvasSequence, except that it\n * accepts tag strings as arguments, and before it can be executed it  needs to\n * be 'built' with an object defining which values should replace the tags.\n */\n\n'use strict';\n\nconst CanvasSequence = require('./CanvasSequence.js');\n\n// Mark properties as intended for internal use.\nconst symbols = Object.freeze({\n  sequence: Symbol.for('sequence'),\n  push:     Symbol.for('push'),\n});\n\n/**\n * Replace tags in the given string with correlated value in values.\n *\n * Rules:\n * - Strings not surrounded by curly braces {} will be returned.\n * - Strings surrounded by curly braces but not corresponding to a property on\n *   'values' will result in a string without the curly braces being returned.\n * - Strings surrounded by curly braces, with the inner string corresponding to\n *   a property on 'values' will result in the corresponding value being\n *   returned.\n *\n * @inner\n * @private\n *\n * @param {string} str\n * @param {object} values\n *\n * @return {string|mixed} Either the original string if no replacement was\n * performed, or the appropriate value.\n */\nfunction replaceTags(str, values) {\n  const tag = str.replace(/^\\{|\\}$/gu, '');\n  if (tag !== str) {\n    return values.hasOwnProperty(tag) ? values[tag] : tag;\n  }\n  return str;\n}\n\n/**\n * A CanvasBlueprint is a rebuildable CanvasSequence. It accepts tagged\n * arguments. When built, tags will be replaced using properties from a provided\n * object.\n *\n * @extends CanvasSequence\n */\nclass CanvasBlueprint extends CanvasSequence {\n  /**\n   * Build the blueprint using the provided values.\n   *\n   * Rules:\n   * - Strings not surrounded by curly braces {} will be returned.\n   * - Strings surrounded by curly braces but not corresponding to a property on\n   *   'values' will result in a string without the curly braces being returned.\n   * - Strings surrounded by curly braces, with the inner string corresponding\n   *   to a property on 'values' will result in the corresponding value being\n   *   returned.\n   *\n   * @param {object} values - The values with which to construct the sequence.\n   *\n   * @return {CanvasSequence} The constructed sequence.\n   */\n  build(values = {}) {\n    const seq = new CanvasSequence();\n    this[symbols.sequence].forEach(({ type, inst, args }) => {\n      const realArgs = args.map(v => {\n        return (typeof v === 'string') ? replaceTags(v, values) : v;\n      });\n      seq[symbols.push](type, inst, realArgs);\n    });\n    return seq;\n  }\n\n  /**\n   * CanvasBlueprints cannot be directly executed!\n   *\n   * @throws TypeError\n   */\n  execute() {\n    throw new TypeError('Cannot execute a blueprint.');\n  }\n}\n\nmodule.exports = CanvasBlueprint;\n\n","/*\n * Access point for npm.\n */\n\n'use strict';\n\nconst CanvasSequence = require('./src/CanvasSequence.js');\nconst CanvasBlueprint = require('./src/CanvasBlueprint.js');\n\nmodule.exports = { CanvasSequence, CanvasBlueprint };\n\n","/*\n * SOME NOTES ABOUT CANVAS RENDERING:\n *  - Avoid using shadows. They appear to kill the framerate.\n */\n\n'use strict';\n\nconst { colours, IdStamper, View } = require('../shared.js');\n\n// Symbols to mark these methods as intended for internal use only.\nconst symbols = Object.freeze({\n  align: Symbol('align'),\n  style: Symbol('style'),\n  outline: Symbol('outline'),\n  marker: Symbol('marker'),\n});\n\n/**\n * The ShadowView class exposes a simple draw() function which renders a shadowy\n * outline of the view onto the canvas.\n *\n * @extends module:shared.View\n * @memberof module:client\n *\n * @param {module:shared.View} values - server-provided data describing this\n * view.\n */\nclass ShadowView extends View {\n  constructor(values) {\n    super(values);\n    IdStamper.cloneId(this, values.id);\n  }\n\n  /**\n   * Render an outline of this view.\n   *\n   * @param {CanvasRenderingContext2D} context - context on which to draw.\n   */\n  draw(context) {\n    /*\n     * WARNING: It is *crucial* that this series of instructions be wrapped in\n     * save() and restore().\n     */\n    context.save();\n    this[symbols.align](context);\n    this[symbols.style](context);\n    this[symbols.outline](context);\n    this[symbols.marker](context);\n    context.restore();\n  }\n\n  /**\n   * Aligns the drawing context so the outline will be rendered in the correct\n   * location with the correct orientation.\n   *\n   * @alias [@@align]\n   * @memberof module:client.ShadowView\n   *\n   * @param {CanvasRenderingContext2D} context - context on which to draw.\n   */\n  [symbols.align](context) {\n    context.translate(this.x, this.y);\n    context.rotate(-this.rotation);\n    context.scale(1 / this.scale, 1 / this.scale);\n  }\n\n  /**\n   * Applies styling to the drawing context.\n   *\n   * @alias [@@style]\n   * @memberof module:client.ShadowView\n   *\n   * @param {CanvasRenderingContext2D} context - context on which to draw.\n   */\n  [symbols.style](context) {\n    context.globalAlpha = 0.5;\n    context.strokeStyle = colours[this.id % colours.length];\n    context.fillStyle = context.strokeStyle;\n    context.lineWidth = 5;\n  }\n\n  /**\n   * Draws an outline of the view.\n   *\n   * @alias [@@outline]\n   * @memberof module:client.ShadowView\n   */\n  [symbols.outline](context) {\n    context.strokeRect(0, 0, this.width, this.height);\n  }\n\n  /**\n   * Draws a small triangle in the upper-left corner of the outline, so that\n   * other views can quickly tell which way this view is oriented.\n   *\n   * @alias [@@marker]\n   * @memberof module:client.ShadowView\n   *\n   * @param {CanvasRenderingContext2D} context - context on which to draw.\n   */\n  [symbols.marker](context) {\n    const base = context.lineWidth / 2;\n    const height = 25;\n\n    context.beginPath();\n    context.moveTo(base, base);\n    context.lineTo(base, height);\n    context.lineTo(height, base);\n    context.lineTo(base, base);\n    context.fill();\n  }\n}\n\nmodule.exports = ShadowView;\n","'use strict';\n\nconst ClientElement = require('./ClientElement.js');\nconst ClientImage = require('./ClientImage.js');\nconst ClientItem = require('./ClientItem.js');\nconst ShadowView = require('./ShadowView.js');\nconst { removeById } = require('../shared.js');\n\nconst REQUIRED_DATA = Object.freeze(['id', 'items', 'views']);\n\n/**\n * The ClientModel is a client-side copy of those aspects of the model that are\n * necessary for rendering the view for the user.\n *\n * @memberof module:client\n */\nclass ClientModel {\n  constructor(root) {\n    /**\n     * Root element where WAMS canvas and HTML elements are located.\n     *\n     * @type {Element}\n     */\n    // eslint-disable-next-line\n    this.rootElement = root;\n\n    /**\n     * All the items in the model, which may all need rendering at some point.\n     * Kept up to date via the ClientController.\n     *\n     * @type {Map.<module:client.ClientItem>}\n     */\n    this.items = new Map();\n\n    /**\n     * An ordered list of the items, so that the render order can accurately\n     * match the order on the server, and be adjusted likewise.\n     *\n     * @type {module:client.ClientItem[]}\n     */\n    this.itemOrder = [];\n\n    /**\n     * The shadows are all the other views that are currently active. They are\n     * tracked in full and an outline for each is rendered.\n     *\n     * @type {Map.<module:client.ShadowView>}\n     */\n    this.shadows = new Map();\n\n    /**\n     * The view data for this user.\n     *\n     * @type {module:client.ClientView}\n     */\n    this.view = null;\n  }\n\n  /**\n   * Generate and store an item of the given type.\n   *\n   * @param {function} ClassFn\n   * @param {object} values\n   */\n  addObject(ClassFn, values) {\n    const object = new ClassFn(values);\n    this.itemOrder.push(object);\n    this.items.set(object.id, object);\n  }\n\n  /**\n   * Generate and store an Element with the given values.\n   *\n   * @param {module:shared.WamsElement} values - State of the new Element\n   */\n  addElement(values) {\n    this.addObject(ClientElement, values);\n  }\n\n  /**\n   * Generate and store an Image with the given values.\n   *\n   * @param {module:shared.WamsImage} values - State of the new image.\n   */\n  addImage(values) {\n    this.addObject(ClientImage, values);\n  }\n\n  /**\n   * Generate and store an Item with the given values.\n   *\n   * @param {module:shared.Item} values - State of the new Item.\n   */\n  addItem(values) {\n    this.addObject(ClientItem, values);\n  }\n\n  /**\n   * Generate and store a 'shadow view' to track another active view.\n   *\n   * @param {module:shared.View} values - State of the new View.\n   */\n  addShadow(values) {\n    const shadow = new ShadowView(values);\n    this.shadows.set(shadow.id, shadow);\n  }\n\n  /**\n   * Removes the given item.\n   *\n   * @param {module:shared.Item} item - The Item to remove.\n   *\n   * @return {boolean} true if removal was successful, false otherwise.\n   */\n  removeItem(item) {\n    const obj = this.items.get(item.id);\n    if (Object.prototype.hasOwnProperty.call(obj, 'tagname')) {\n      this.rootElement.removeChild(obj.element);\n    }\n\n    this.items.delete(item.id);\n    return removeById(this.itemOrder, item);\n  }\n\n  /**\n   * Removes the given 'shadow' view.\n   *\n   * @param {module:shared.View} shadow - The 'shadow' view to remove.\n   *\n   * @return {boolean} true if removal was successful, false otherwise.\n   */\n  removeShadow(shadow) {\n    return this.shadows.delete(shadow.id);\n  }\n\n  /**\n   * Set up the internal copy of the model according to the data provided by the\n   * server.\n   *\n   * @param {module:shared.FullStateReporter} data - The data from the server\n   *       detailing the current state of the model.  See REQUIRED_DATA. If any\n   *       is missing, something has gone terribly wrong, and an exception will\n   *       be thrown.\n   */\n  setup(data) {\n    REQUIRED_DATA.forEach((d) => {\n      if (!Object.prototype.hasOwnProperty.call(data, d)) throw Error(`setup requires: ${d}`);\n    });\n    data.views.forEach((v) => v.id !== this.view.id && this.addShadow(v));\n    data.items.reverse().forEach((o) => {\n      if (Object.prototype.hasOwnProperty.call(o, 'src')) {\n        this.addImage(o);\n      } else if (Object.prototype.hasOwnProperty.call(o, 'tagname')) {\n        this.addElement(o);\n      } else {\n        this.addItem(o);\n      }\n    });\n    this.view.config.shadows = data.shadows;\n    this.view.config.status = data.status;\n    this.view.config.backgroundImage = data.backgroundImage;\n  }\n\n  /**\n   * Bring item to top, so that it's above others.\n   *\n   */\n  bringItemToTop(id) {\n    const index = this.itemOrder.findIndex((el) => el.id === id);\n    this.itemOrder.push(...this.itemOrder.splice(index, 1));\n  }\n\n  /**\n   * Call the given method with the given property of 'data' on the item with id\n   * equal to data.id.\n   *\n   * @param {string} fnName\n   * @param {string} property\n   * @param {object} data\n   */\n  setItemValue(fnName, property, data) {\n    if (this.items.has(data.id)) {\n      this.items.get(data.id)[fnName](data[property]);\n    }\n  }\n\n  /**\n   * Set the attributes for the appropriate item.\n   *\n   * @param {object} data\n   */\n  setAttributes(data) {\n    this.setItemValue('setAttributes', 'attributes', data);\n  }\n\n  setParent(data) {\n    this.setItemValue('setParent', 'parent', data);\n  }\n\n  /**\n   * Set the image for the appropriate item.\n   *\n   * @param {object} data\n   */\n  setImage(data) {\n    this.setItemValue('setImage', 'src', data);\n  }\n\n  /**\n   * Set the canvas rendering sequence for the appropriate item.\n   *\n   * @param {object} data\n   */\n  setRender(data) {\n    this.setItemValue('setRender', 'sequence', data);\n  }\n\n  /**\n   * Intended for use as an internal helper function, so that this functionality\n   * does not need to be defined twice for both of the items and shadows arrays.\n   *\n   * @param {string} container - Name of the ClientView property defining the\n   * array which contains the object to update.\n   * @param {( module:shared.Item | module:shared.View )} data - Data with which\n   * an object in the container will be updated.  Note that the object is\n   * located using an 'id' field on this data object.\n   */\n  update(container, data) {\n    if (this[container].has(data.id)) {\n      this[container].get(data.id).assign(data);\n      if (container === 'items') {\n        const item = this[container].get(data.id);\n        if (!item.lockZ) {\n          this.bringItemToTop(data.id);\n        }\n      }\n    } else {\n      console.warn(`Unable to find in ${container}: id: `, data.id);\n    }\n  }\n\n  /**\n   * Update an item.\n   *\n   * @param {module:shared.Item} data - data from the server, has an 'id' field\n   * with which the item will be located.\n   */\n  updateItem(data) {\n    this.update('items', data);\n  }\n\n  /**\n   * Update a 'shadow' view.\n   *\n   * @param {module:shared.View} data - data from the server, has an 'id' field\n   * with which the view will be located.\n   */\n  updateShadow(data) {\n    this.update('shadows', data);\n  }\n\n  /**\n   * Update the view.\n   *\n   * @param {module:shared.View} data - data from the server, specficially\n   * pertaining to this client's view.\n   */\n  updateView(data) {\n    this.view.assign(data);\n  }\n\n  /**\n   * Dispatch custom DOM event to trigger user defined action\n   *\n   * @param {object} event - event data, contains `action` and `payload`\n   */\n  dispatch(event) {\n    document.dispatchEvent(new CustomEvent(event.action, { detail: event.payload }));\n  }\n}\n\nmodule.exports = ClientModel;\n","'use strict';\n\nconst { View } = require('../shared.js');\n\n// Data fields to write for status indicator text.\nconst STATUS_KEYS = Object.freeze(['x', 'y', 'width', 'height', 'rotation', 'scale']);\n\n// Mark these methods as intended only for internal use.\nconst symbols = Object.freeze({\n  align: Symbol('align'),\n  drawBackground: Symbol('dragBackground'),\n  drawItems: Symbol('drawItems'),\n  drawShadows: Symbol('drawShadows'),\n  drawStatus: Symbol('drawStatus'),\n  wipe: Symbol('wipe'),\n});\n\n// Default ClientView configuration.\nconst DEFAULT_CONFIG = Object.freeze({\n  showStatus: false,\n  shadows: false,\n});\n\n/**\n * The ClientView is responsible for rendering the view. To do this, it keeps\n * track of its own position, scale, and orientation, as well as those values\n * for all items and all other views (which will be represented with outlines).\n *\n * @extends module:shared.View\n * @memberof module:client\n *\n * @param {CanvasRenderingContext2D} context - The canvas context in which to\n * render the model.\n */\nclass ClientView extends View {\n  constructor(context) {\n    super(ClientView.DEFAULTS);\n\n    /**\n     * The CanvasRenderingContext2D is required for drawing (rendering) to take\n     * place.\n     *\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = context;\n\n    /**\n     * The model holds the information about items and shadows that need\n     * rendering.\n     *\n     * @type {module:client.ClientModel}\n     */\n    this.model = null;\n\n    /**\n     * Id to make the views uniquely identifiable. Will be assigned when setup\n     * message is received from server.\n     *\n     * @name id\n     * @type {number}\n     * @constant\n     * @instance\n     * @memberof module:client.ClientView\n     */\n    this.id = null;\n\n    /**\n     * Configuration of ClientView that can be\n     * modified in user-defined `window.WAMS_CONFIG`.\n     *\n     * @type {object}\n     */\n    this.config = { ...DEFAULT_CONFIG };\n  }\n\n  /**\n   * Positions the rendering context precisely, taking into account all\n   * transformations, so that rendering can proceed correctly.\n   *\n   * @alias [@@align]\n   * @memberof module:client.ClientView\n   */\n  [symbols.align]() {\n    /*\n     * WARNING: It is crucially important that the instructions below occur\n     * in *precisely* this order!\n     */\n    this.context.scale(this.scale, this.scale);\n    this.context.rotate(this.rotation);\n    this.context.translate(-this.x, -this.y);\n  }\n\n  /**\n   * Renders all the items.\n   *\n   * @alias [@@drawItems]\n   * @memberof module:client.ClientView\n   */\n  [symbols.drawItems]() {\n    this.model.itemOrder.forEach((o) => o.draw(this.context, this));\n  }\n\n  /**\n   * Renders outlines of all the other views.\n   *\n   * @alias [@@drawShadows]\n   * @memberof module:client.ClientView\n   */\n  [symbols.drawShadows]() {\n    this.model.shadows.forEach((v) => v.draw(this.context));\n  }\n\n  /**\n   * Renders text describing the status of the view to the upper left corner of\n   * the view, to assist with debugging.\n   *\n   * @alias [@@drawShadows]\n   * @memberof module:client.ClientView\n   */\n  [symbols.drawStatus]() {\n    const messages = STATUS_KEYS.map((k) => `${k}: ${this[k].toFixed(2)}`).concat([\n      `# of Shadows: ${this.model.shadows.size}`,\n    ]);\n    let ty = 40;\n    const tx = 20;\n\n    this.context.save();\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\n    this.context.font = '18px Georgia';\n    messages.forEach((m) => {\n      this.context.fillText(m, tx, ty);\n      ty += 20;\n    });\n    this.context.restore();\n  }\n\n  /**\n   * Clears all previous renders, to ensure a clean slate for the upcoming\n   * render.\n   *\n   * @alias [@@wipe]\n   * @memberof module:client.ClientView\n   */\n  [symbols.wipe]() {\n    this.context.clearRect(0, 0, window.innerWidth, window.innerHeight);\n  }\n\n  /**\n   * Fully render the current state of the system.\n   */\n  draw() {\n    this.context.save();\n    this[symbols.wipe]();\n    this[symbols.align]();\n    this[symbols.drawItems]();\n    if (this.config.shadows) this[symbols.drawShadows]();\n    if (this.config.status) this[symbols.drawStatus]();\n    this.context.restore();\n  }\n\n  /**\n   * Fill all available space in the window.\n   */\n  resizeToFillWindow(dpr, iOS) {\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n    if (!iOS) this.context.setTransform(dpr, 0, 0, dpr, 0, 0);\n  }\n}\n\nmodule.exports = ClientView;\n","/*\n * WAMS code to be executed in the client browser.\n */\n\n/**\n * This file defines the entry point for the client side of a WAMS application.\n *\n * <br>\n * <img\n * src =\n * \"https://raw.githubusercontent.com/mvanderkamp/wams.wiki/master/graphs/client.png\"\n * style = \"max-height: 200px;\"\n * >\n *\n * @module client\n */\n\n'use strict';\n\nconst ClientController = require('./client/ClientController.js');\nconst ClientModel = require('./client/ClientModel.js');\nconst ClientView = require('./client/ClientView.js');\n\nclass ClientApplication {\n  constructor(controller) {\n    this.controller = controller;\n  }\n\n  on(event, func) {\n    // listen for this DOM event\n    document.addEventListener(event, func);\n    this.controller.eventListeners.push(event);\n\n    // if this event was called before this code executed, dispatch it again\n    this.controller.eventQueue.forEach((ev) => {\n      if (ev.action === event) {\n        document.dispatchEvent(new CustomEvent(event, { detail: ev.payload }));\n      }\n    });\n\n    // Remove events from the queue that have been dispatched.\n    this.controller.eventQueue = this.controller.eventQueue.filter((ev) => ev.action !== event);\n  }\n\n  dispatch(event, func) {\n    this.controller.dispatch(event, func);\n  }\n}\n\nfunction run() {\n  document.addEventListener('contextmenu', (e) => e.preventDefault());\n\n  const root = document.querySelector('#root');\n  if (!root) throw Error('No root element was found on the page.');\n  const canvas = document.querySelector('canvas');\n  if (!canvas) throw Error('No canvas element was found on the page.');\n\n  const context = canvas.getContext('2d');\n\n  const model = new ClientModel(root);\n  const view = new ClientView(context);\n  const controller = new ClientController(root, canvas, view, model);\n  window.WAMS = new ClientApplication(controller);\n\n  model.view = view;\n  view.model = model;\n  controller.connect();\n}\n\nwindow.addEventListener('load', run, {\n  capture: false,\n  once: true,\n  passive: true,\n});\n"],"names":["$lWUP5","parcelRequire","debug","module","exports","lookup","cache","managers","uri","opts","undefined","io","parsed","source","id","path","sameNamespace","nsps","forceNew","multiplex","query","socket","protocol","$89qK9","connect","Manager","Socket","$iOTCh","$ffab17a18a525d91$var$debug","loc","obj","location","host","charAt","test","port","indexOf","href","$db3809c10426b339$var$re","$db3809c10426b339$var$parts","str","src","b","e","substring","replace","length","data","m","exec","i","authority","ipv6uri","pathNames","regx","names","split","substr","splice","$db3809c10426b339$var$pathNames","queryKey","$0","$1","$2","$ibaza","load","r","storage","log","console","Function","prototype","apply","call","arguments","formatArgs","args","useColors","this","namespace","humanize","diff","c","color","index","lastC","match","save","namespaces","removeItem","window","process","type","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","chrome","local","localStorage","localstorage","colors","formatters","j","v","JSON","stringify","err","message","enable","$d3c1734dacb01657$var$cachedSetTimeout","$d3c1734dacb01657$var$cachedClearTimeout","$d3c1734dacb01657$var$process","$d3c1734dacb01657$var$defaultSetTimout","Error","$d3c1734dacb01657$var$defaultClearTimeout","$d3c1734dacb01657$var$runTimeout","fun","setTimeout","e1","clearTimeout","$d3c1734dacb01657$var$currentQueue","$d3c1734dacb01657$var$queue","$d3c1734dacb01657$var$draining","$d3c1734dacb01657$var$queueIndex","$d3c1734dacb01657$var$cleanUpNextTick","concat","$d3c1734dacb01657$var$drainQueue","timeout","len","run","marker","$d3c1734dacb01657$var$runClearTimeout","$d3c1734dacb01657$var$Item","array","$d3c1734dacb01657$var$noop","nextTick","Array","push","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","createDebug","prevTime","enabled","self","curr","Date","ms","prev","coerce","unshift","format","formatter","val","logFn","bind","hash","charCodeAt","Math","abs","selectColor","destroy","init","instances","stack","disable","skips","instance","$0a0abeeaa8fab226$var$s","$0a0abeeaa8fab226$var$m","$0a0abeeaa8fab226$var$h","$0a0abeeaa8fab226$var$d","$0a0abeeaa8fab226$var$y","$0a0abeeaa8fab226$var$plural","n","floor","ceil","options","String","parseFloat","$0a0abeeaa8fab226$var$parse","isNaN","long","round","$0a0abeeaa8fab226$var$fmtShort","$5ef3e8a7c3f8e43d$export$a51d6b395ff4c65a","$5ef3e8a7c3f8e43d$export$b14ad400b1d09e0f","$5ef3e8a7c3f8e43d$export$df50b52b1548c0dc","$5ef3e8a7c3f8e43d$export$5fd12e2e89ab14dc","$5ef3e8a7c3f8e43d$export$e39a34cfd532e15","$5ef3e8a7c3f8e43d$export$8b9f6dafceb64eb3","$5ef3e8a7c3f8e43d$export$103bedf43ba882db","$5ef3e8a7c3f8e43d$export$4e593a8e75481d89","$5ef3e8a7c3f8e43d$export$153fee94313d337d","$5ef3e8a7c3f8e43d$export$a50aceb0e02a00aa","$5ef3e8a7c3f8e43d$export$f9de6ca0bc043724","$5ef3e8a7c3f8e43d$var$debug","$5ef3e8a7c3f8e43d$var$Encoder","$5ef3e8a7c3f8e43d$var$Decoder","$5ef3e8a7c3f8e43d$var$ERROR_PACKET","$5ef3e8a7c3f8e43d$var$encodeAsString","attachments","nsp","payload","$5ef3e8a7c3f8e43d$var$tryStringify","reconstructor","$5ef3e8a7c3f8e43d$var$BinaryReconstructor","packet","reconPack","buffers","$5ef3e8a7c3f8e43d$var$error","msg","encode","callback","writeEncoding","bloblessData","deconstruction","$iRKjc","deconstructPacket","pack","removeBlobs","$5ef3e8a7c3f8e43d$var$encodeAsBinary","$173mS","add","p","Number","start","buf","next","parse","$5ef3e8a7c3f8e43d$var$tryParse","$g945e","$5ef3e8a7c3f8e43d$var$decodeString","$fyDVZ","base64","takeBinaryData","finishedReconstruction","binData","reconstructPacket","$0cf90eb8bd3a4944$var$Emitter","key","$0cf90eb8bd3a4944$var$mixin","addEventListener","event","fn","_callbacks","removeEventListener","callbacks","$dbc119302a3f8732$export$ac2edb9eb7af56f6","$dbc119302a3f8732$export$a00da3b1ec037a04","$dbc119302a3f8732$export$c546b07ca8124461","$dbc119302a3f8732$var$toString","Object","toString","$dbc119302a3f8732$var$withNativeBlob","Blob","$dbc119302a3f8732$var$withNativeFile","File","$dbc119302a3f8732$var$_deconstructPacket","placeholder","_placeholder","num","newData","$dbc119302a3f8732$var$_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","FileReader","onload","result","readAsArrayBuffer","$bc10a77f32787f91$var$toString","isArray","arr","$b5390221658aeb2d$var$withNativeBuffer","$b5390221658aeb2d$require$Buffer","isBuffer","$b5390221658aeb2d$var$withNativeArrayBuffer","ArrayBuffer","isView","buffer","$b5390221658aeb2d$var$isView","$0934e0939605d48c$export$a143d493d941bafc","$0934e0939605d48c$export$f99ded8fe4b79145","$0934e0939605d48c$var$customInspectSymbol","Symbol","$0934e0939605d48c$var$Buffer","$0934e0939605d48c$var$K_MAX_LENGTH","$0934e0939605d48c$var$createBuffer","RangeError","Uint8Array","setPrototypeOf","arg","encodingOrOffset","TypeError","$0934e0939605d48c$var$allocUnsafe","$0934e0939605d48c$var$from","value","string","encoding","isEncoding","$0934e0939605d48c$var$byteLength","actual","write","slice","$0934e0939605d48c$var$fromString","arrayView","$0934e0939605d48c$var$isInstance","copy","$0934e0939605d48c$var$fromArrayBuffer","byteOffset","byteLength","$0934e0939605d48c$var$fromArrayLike","$0934e0939605d48c$var$fromArrayView","SharedArrayBuffer","valueOf","from","$0934e0939605d48c$var$checked","$0934e0939605d48c$var$numberIsNaN","$0934e0939605d48c$var$fromObject","toPrimitive","$0934e0939605d48c$var$assertSize","size","mustMatch","loweredCase","$0934e0939605d48c$var$utf8ToBytes","$0934e0939605d48c$var$base64ToBytes","$0934e0939605d48c$var$slowToString","end","$0934e0939605d48c$var$hexSlice","$0934e0939605d48c$var$utf8Slice","$0934e0939605d48c$var$asciiSlice","$0934e0939605d48c$var$latin1Slice","$0934e0939605d48c$var$base64Slice","$0934e0939605d48c$var$utf16leSlice","$0934e0939605d48c$var$swap","$0934e0939605d48c$var$bidirectionalIndexOf","$0934e0939605d48c$var$arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","$0934e0939605d48c$var$hexWrite","offset","remaining","strLen","$0934e0939605d48c$var$utf8Write","$0934e0939605d48c$var$blitBuffer","$0934e0939605d48c$var$asciiWrite","byteArray","$0934e0939605d48c$var$asciiToBytes","$0934e0939605d48c$var$base64Write","$0934e0939605d48c$var$ucs2Write","units","hi","lo","$0934e0939605d48c$var$utf16leToBytes","$bQMRt","fromByteArray","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","$0934e0939605d48c$var$MAX_ARGUMENTS_LENGTH","fromCharCode","$0934e0939605d48c$var$decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","$0934e0939605d48c$var$typedArraySupport","error","defineProperty","enumerable","get","poolSize","alloc","fill","$0934e0939605d48c$var$alloc","allocUnsafe","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","set","swap16","swap32","swap64","toLocaleString","equals","inspect","max","trim","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","$0934e0939605d48c$var$hexSliceLookupTable","bytes","$0934e0939605d48c$var$checkOffset","ext","$0934e0939605d48c$var$checkInt","$0934e0939605d48c$var$wrtBigUInt64LE","$0934e0939605d48c$var$checkIntBI","BigInt","$0934e0939605d48c$var$wrtBigUInt64BE","$0934e0939605d48c$var$checkIEEE754","$0934e0939605d48c$var$writeFloat","littleEndian","noAssert","$dbnIE","$0934e0939605d48c$var$writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","$0934e0939605d48c$var$defineBigIntMethod","$0934e0939605d48c$var$validateNumber","first","last","$0934e0939605d48c$var$boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","code","$0934e0939605d48c$var$errors","$0934e0939605d48c$var$E","sym","getMessage","Base","constructor","super","writable","configurable","$0934e0939605d48c$var$addNumericalSeparator","range","ERR_OUT_OF_RANGE","$0934e0939605d48c$var$checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","$0934e0939605d48c$var$INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","$0934e0939605d48c$var$base64clean","dst","alphabet","i16","$0934e0939605d48c$var$BufferBigIntNotDefined","$8a0a73e6b73fd0c4$export$d622b2ad8d90c771","$8a0a73e6b73fd0c4$export$6100ba28696e12de","b64","tmp","lens","$8a0a73e6b73fd0c4$var$getLens","validLen","placeHoldersLen","$8a0a73e6b73fd0c4$var$Arr","$8a0a73e6b73fd0c4$var$_byteLength","curByte","$8a0a73e6b73fd0c4$var$revLookup","uint8","extraBytes","parts","maxChunkLength","len2","$8a0a73e6b73fd0c4$var$encodeChunk","$8a0a73e6b73fd0c4$var$lookup","join","$8a0a73e6b73fd0c4$var$code","$8a0a73e6b73fd0c4$var$i","$8a0a73e6b73fd0c4$var$len","output","$998eb38f4d082829$export$aafa59e2e03f2942","$998eb38f4d082829$export$68d8715fc104d294","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","s","NaN","rt","LN2","$a6Ylp","$35520539722bdc7d$var$debug","$35520539722bdc7d$var$has","hasOwnProperty","$35520539722bdc7d$var$Manager","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","$3FiLK","jitter","readyState","connecting","lastPing","packetBuffer","_parser","parser","encoder","Encoder","decoder","Decoder","autoConnect","open","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","skipReconnect","openSub","$2B0Y8","onopen","errorSub","cleanup","timer","close","$4vVX2","onping","onpong","ondata","ondecoded","onerror","$hckP1","onConnecting","$73aJM","encodedPackets","processPacketQueue","shift","subsLength","disconnect","reset","onclose","reason","delay","duration","onreconnect","attempt","$66ca4d2bc8b5b259$var$debug","$66ca4d2bc8b5b259$var$Socket","hostname","secure","agent","$b0izg","decode","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","withCredentials","timestampParam","timestampRequests","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","product","extraHeaders","keys","localAddress","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","o","$66ca4d2bc8b5b259$var$clone","EIO","transport","sid","requestTimeout","protocols","self1","setTransport","onDrain","onPacket","onError","onClose","probe","failed","onTransportOpen","upgradeLosesBinary","supportsBinary","send","upgrading","pause","flush","freezeTransport","onTransportClose","onupgrade","to","onOpen","l","onHandshake","setPing","filterUpgrades","onHeartbeat","ping","sendPacket","compress","waitForUpgrade","cleanupAndClose","desc","filteredUpgrades","$5b61557eb055249a$export$bdbf04fbdcf6ac3c","$5b61557eb055249a$export$3f859614deccc31b","xd","xs","isSSL","xdomain","xscheme","$7uv17","$evo0J","$hCrCV","$1WQvA","$245i3","XMLHttpRequest","XDomainRequest","$cxvGv","e2","$02b9a794a529c3e3$var$debug","$02b9a794a529c3e3$var$empty","$02b9a794a529c3e3$var$XHR","$cvl38","$02b9a794a529c3e3$var$Request","method","async","isBinary","create","Request","$jriw2","request","doWrite","req","sendXhr","doPoll","onData","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","responseType","status","e3","requestsCount","requests","onSuccess","fromError","abort","response","attachEvent","$02b9a794a529c3e3$var$unloadHandler","$4oiAB","$91a8b5466e03018a$var$debug","$91a8b5466e03018a$var$Polling","$91a8b5466e03018a$var$hasXHR2","doOpen","poll","onPause","polling","total","$g7eRJ","decodePayload","doClose","packets","callbackfn","encodePayload","schema","$aKJMy","$3327d2caf416224d$var$Transport","description","decodePacket","$bbb8d4d0f45004a6$export$a51d6b395ff4c65a","$bbb8d4d0f45004a6$export$8cec925cdbc069a3","$bbb8d4d0f45004a6$export$57852049361a8e62","$bbb8d4d0f45004a6$export$1224bd349343a780","$bbb8d4d0f45004a6$export$4647901878f33f31","$bbb8d4d0f45004a6$export$d8083abc502764be","$bbb8d4d0f45004a6$export$144d64fe58dad441","$bbb8d4d0f45004a6$export$d10cc2e7f7566a2d","$bbb8d4d0f45004a6$export$ae2b9d31affbcbb7","$bbb8d4d0f45004a6$export$189405ab6c76376a","$bbb8d4d0f45004a6$export$94d8cc1d96592971","$bbb8d4d0f45004a6$var$base64encoder","$bbb8d4d0f45004a6$var$isAndroid","$bbb8d4d0f45004a6$var$isPhantomJS","$bbb8d4d0f45004a6$var$dontSendBlobs","$bbb8d4d0f45004a6$var$packets","pong","noop","$bbb8d4d0f45004a6$var$packetslist","$faxDw","$bbb8d4d0f45004a6$var$err","$bbb8d4d0f45004a6$var$map","ary","each","done","$77cRi","eachWithIndex","el","cb","utf8encode","contentArray","resultBuffer","$bbb8d4d0f45004a6$var$encodeArrayBuffer","$1pvih","fr","$bbb8d4d0f45004a6$var$encodeBlobAsArrayBuffer","blob","$bbb8d4d0f45004a6$var$encodeBlob","$bbb8d4d0f45004a6$var$encodeBase64Object","encoded","$7HSJd","strict","b64data","readAsDataURL","typed","basic","btoa","utf8decode","$bbb8d4d0f45004a6$var$tryDecode","rest","$61qrM","$gg5F1","doneCallback","setLengthHeader","results","chr","totalLength","reduce","acc","resultArray","bufferIndex","forEach","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","tailArray","msgLength","has","$bd628806a318cb11$var$toString","$bd628806a318cb11$var$withNativeBlob","$bd628806a318cb11$var$withNativeFile","$bd628806a318cb11$var$hasBinary","$bd628806a318cb11$require$Buffer","arraybuffer","abv","ii","$52e3294b1e6b0f81$var$noop","count","err_cb","bail","proxy","$59c7006eda02de5e$var$byteArray","$59c7006eda02de5e$var$byteCount","$59c7006eda02de5e$var$byteIndex","$59c7006eda02de5e$var$stringFromCharCode","$59c7006eda02de5e$var$ucs2decode","extra","counter","$59c7006eda02de5e$var$checkScalarValue","toUpperCase","$59c7006eda02de5e$var$createByte","$59c7006eda02de5e$var$encodeCodePoint","symbol","$59c7006eda02de5e$var$readContinuationByte","continuationByte","$59c7006eda02de5e$var$decodeSymbol","byte1","byteString","$59c7006eda02de5e$var$ucs2encode","$529021669bcd94a1$export$c564cdbbe6da493","$529021669bcd94a1$export$2f872c0f2117be69","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","$107066885fa82815$var$BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","$107066885fa82815$var$blobSupported","append","getBlob","$107066885fa82815$var$mapArrayBufferViews","map","chunk","$107066885fa82815$var$BlobBuilderConstructor","bb","part","$802e18fbad12753c$export$c564cdbbe6da493","$802e18fbad12753c$export$2f872c0f2117be69","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","$7d41b6a10159e77b$var$prev","$7d41b6a10159e77b$var$alphabet","$7d41b6a10159e77b$var$map","$7d41b6a10159e77b$var$seed","$7d41b6a10159e77b$var$i","$7d41b6a10159e77b$var$encode","$7d41b6a10159e77b$var$yeast","now","decoded","$04b64a21bc1ec249$var$s","$04b64a21bc1ec249$var$m","$04b64a21bc1ec249$var$h","$04b64a21bc1ec249$var$d","$04b64a21bc1ec249$var$y","$04b64a21bc1ec249$var$plural","$04b64a21bc1ec249$var$parse","$04b64a21bc1ec249$var$fmtShort","$cd3b6a5e6dba85bb$var$JSONPPolling","$cd3b6a5e6dba85bb$var$callbacks","$cd3b6a5e6dba85bb$var$rNewline","$cd3b6a5e6dba85bb$var$rEscapedNewline","$cd3b6a5e6dba85bb$var$empty","___eio","script","parentNode","removeChild","form","iframe","createElement","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","area","iframeId","className","position","top","left","setAttribute","complete","initIframe","html","action","submit","$16b3f04ddacaaaef$var$BrowserWebSocket","$16b3f04ddacaaaef$var$NodeWebSocket","$16b3f04ddacaaaef$var$debug","WebSocket","MozWebSocket","$16b3f04ddacaaaef$var$WebSocketImpl","$16b3f04ddacaaaef$var$WS","usingBrowserWebSocket","check","headers","ws","supports","binary","addEventListeners","onmessage","ev","encodePacket","$16b3f04ddacaaaef$require$Buffer","$52212469f058390b$var$indexOf","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","$2ruYM","BINARY_EVENT","EVENT","pop","CONNECT","onpacket","rootNamespaceError","ERROR","onconnect","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ack","sent","emitBuffered","$34970293bb11b221$var$slice","$2ab3c299b05997b6$var$Backoff","factor","rand","random","deviation","$2ddb4406b5710b24$exports","freeze","prop","item","idx","findIndex","defineOwnImmutableEnumerableProperty","$022b237644207d82$var$symbols","prevId","$022b237644207d82$exports","stampNewId","previous","isSafeInteger","$022b237644207d82$var$getUniqueId","$022b237644207d82$require$defineOwnImmutableEnumerableProperty","static","$c680aea5536b41c4$var$TYPES","ADD_ELEMENT","ADD_IMAGE","ADD_ITEM","ADD_SHADOW","ADD_GROUP","RM_ITEM","RM_SHADOW","UD_ITEM","UD_SHADOW","UD_VIEW","RM_ATTRS","SET_ITEMS","SET_ATTRS","SET_IMAGE","SET_RENDER","SET_PARENT","INITIALIZE","LAYOUT","FULL","CLICK","RESIZE","SWIPE","TRACK","TRANSFORM","POINTER","BLUR","IMG_LOAD","DISPATCH","$c680aea5536b41c4$var$TYPE_VALUES","values","$c680aea5536b41c4$var$Message","reporter","emitWith","emitter","report","entries","$c680aea5536b41c4$require$defineOwnImmutableEnumerableProperty","$c680aea5536b41c4$exports","$241c78dcca39b22a$var$Item","$870a22d3fbbee125$exports","coreProperties","INITIALIZER","KEYS","Reporter","assign","cloneId","DEFAULTS","rotation","scale","lockZ","$241c78dcca39b22a$var$WamsElement","width","height","tagname","$241c78dcca39b22a$var$WamsImage","$241c78dcca39b22a$exports","views","items","clientScripts","stylesheets","shadows","backgroundImage","useMultiScreenGestures","changedTouches","ctrlKey","altKey","shiftKey","metaKey","$8a13928bd6cf2429$var$Point2D","angleTo","point","atan2","averageDistanceTo","points","totalDistanceTo","clone","distanceTo","hypot","divideBy","coefficient","isLeftOf","p0","p1","dl","minus","dp","multiplyBy","rotate","theta","cosTheta","cos","sinTheta","sin","sum","pt","$8a13928bd6cf2429$exports","$77dc2d94e185a53d$exports","centroid","midpoint","radius","contains","winding_number","wn","$6ca1b6f3784b814a$exports","$187e1e6ba0cb70c9$exports","sqrt","$9a3a59fd4e8a6314$var$constants","ROTATE_0","ROTATE_90","PI","ROTATE_180","ROTATE_270","ROTATE_360","NS_WAMS","NS_WAMS_TRACKING","$9a3a59fd4e8a6314$exports","constants","DataReporter","TouchReporter","IdStamper","Message","NOP","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$de0d6a332419bf3c$var$g_id","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$de0d6a332419bf3c$var$Gesture","element","handler","isEnabled","state","active","enableKeys","disableKeys","minInputs","maxInputs","some","k","move","cancel","evaluateHook","hook","recognize","phase","MAX_VALUE","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$de0d6a332419bf3c$exports","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$6c3676f10a43b740$var$Point2D","anglesTo","plus","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$6c3676f10a43b740$exports","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$be6f0e84320366a7$var$CANCEL","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$be6f0e84320366a7$var$END","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$be6f0e84320366a7$var$MOVE","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$be6f0e84320366a7$var$START","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$0ca7bfe1c074e8ca$require$PHASE","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$be6f0e84320366a7$exports","CANCEL_EVENTS","KEYBOARD_EVENTS","MOUSE_EVENTS","POINTER_EVENTS","TOUCH_EVENTS","STATE_KEYS","STATE_KEY_STRINGS","CANCEL","END","MOVE","START","PHASE","blur","pointercancel","touchcancel","mouseup","pointerup","touchend","mousemove","pointermove","touchmove","mousedown","pointerdown","touchstart","PHASES","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$0ca7bfe1c074e8ca$exports","identifier","clientX","clientY","find","touch","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$0ca7bfe1c074e8ca$var$getEventObject","time","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$4559ecf940edc78d$var$PI_2","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$4559ecf940edc78d$var$PI_NVE","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$4559ecf940edc78d$var$setFilter","predicate","Set","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$e2125e2e71e37a0c$require$getPropagationPath","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$4559ecf940edc78d$exports","angularDifference","getPropagationPath","composedPath","node","setDifference","right","setFilter","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$e2125e2e71e37a0c$exports","currentData","initialElements","WeakSet","initial","current","startTime","elapsedTime","totalDistance","update","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$require$CANCEL","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$require$END","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$require$MOVE","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$require$PHASE","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$require$START","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$var$symbols","for","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$var$update_fns","TouchEvent","updateInput","PointerEvent","pointerId","MouseEvent","button","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$639be6fb478a6d5a$exports","Map","inputs","activePoints","clearEndedInputs","delete","getInputsInPhase","filter","getInputsNotInPhase","hasNoInputs","setPointerCapture","releasePointerCapture","warn","updateAllInputs","updateFields","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$CANCEL_EVENTS","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$KEYBOARD_EVENTS","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$MOUSE_EVENTS","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$POINTER_EVENTS","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$TOUCH_EVENTS","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$STATE_KEY_STRINGS","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$PHASE","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$CANCEL","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$END","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$START","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$setDifference","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$require$setFilter","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$var$Region","gestures","activeGestures","potentialGestures","activate","eventNames","preferPointer","arbitrate","eventName","capture","passive","handleKeyboardEvent","preventDefault","gesture","resetActiveGestures","oldActiveGestures","setActiveGestures","setPotentialGestures","updateActiveGestures","isInitial","pruneActiveGestures","addGesture","touchAction","removeGesture","getGesturesByElement","removeGesturesByElement","g","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$b66a0f22c18e3e3d$exports","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$01c3d7b128023e4f$var$cascade","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$01c3d7b128023e4f$var$smooth","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$01c3d7b128023e4f$var$Smoothable","final_options","isRequested","matchMedia","matches","$c7ae6dd8608f332b$var$$17807945cdde5d67$var$$01c3d7b128023e4f$var$smoothingIsApplicable","applySmoothing","identity","restart","average","$c7ae6dd8608f332b$var$$edded22326d64913$require$Gesture","$c7ae6dd8608f332b$var$$17807945cdde5d67$exports","Gesture","Input","Point2D","PointerData","Region","Smoothable","State","$c7ae6dd8608f332b$var$$edded22326d64913$require$Point2D","$c7ae6dd8608f332b$var$$edded22326d64913$require$Smoothable","$c7ae6dd8608f332b$var$$edded22326d64913$exports","outgoing","translation","$c7ae6dd8608f332b$var$$a29eb49c9650e38a$require$Gesture","$c7ae6dd8608f332b$var$$a29eb49c9650e38a$require$Smoothable","$c7ae6dd8608f332b$var$$a29eb49c9650e38a$var$Pinch","distance","$c7ae6dd8608f332b$var$$a29eb49c9650e38a$exports","$c7ae6dd8608f332b$var$$044241a6e313bbcb$require$Gesture","$c7ae6dd8608f332b$var$$044241a6e313bbcb$require$Point2D","$c7ae6dd8608f332b$var$$044241a6e313bbcb$require$MOVE","$c7ae6dd8608f332b$var$$044241a6e313bbcb$var$Press","originalInputs","tolerance","$c7ae6dd8608f332b$var$$044241a6e313bbcb$exports","$c7ae6dd8608f332b$var$$b6747a8030ff7e4d$require$Smoothable","$c7ae6dd8608f332b$var$$5618dc3399c82d06$require$Gesture","$c7ae6dd8608f332b$var$$5618dc3399c82d06$require$Point2D","$c7ae6dd8608f332b$var$$5618dc3399c82d06$require$Smoothable","$c7ae6dd8608f332b$var$$5618dc3399c82d06$var$Pivotable","pivot","rect","getBoundingClientRect","updatePrevious","dynamicPivot","getClientCenter","deadzoneRadius","$c7ae6dd8608f332b$var$$5618dc3399c82d06$exports","$c7ae6dd8608f332b$var$$b6747a8030ff7e4d$exports","rv","$c7ae6dd8608f332b$var$$2779699df4dafe8f$require$angularDifference","$c7ae6dd8608f332b$var$$2779699df4dafe8f$require$Gesture","$c7ae6dd8608f332b$var$$2779699df4dafe8f$require$Smoothable","$c7ae6dd8608f332b$var$$2779699df4dafe8f$var$Rotate","previousAngles","stagedAngles","angle","$c7ae6dd8608f332b$var$$2779699df4dafe8f$exports","$c7ae6dd8608f332b$var$$29f6d3783b0fe128$require$Gesture","$c7ae6dd8608f332b$var$$29f6d3783b0fe128$var$Swipe","moves","saved","getResult","validate","$c7ae6dd8608f332b$var$$29f6d3783b0fe128$var$PROGRESS_STACK_SIZE","velocity","calc_velocity","direction","calc_angle","vlim","$c7ae6dd8608f332b$var$$29f6d3783b0fe128$exports","$c7ae6dd8608f332b$var$$5bf1e923ca9fec67$require$angularDifference","$c7ae6dd8608f332b$var$$5bf1e923ca9fec67$require$Smoothable","$c7ae6dd8608f332b$var$$5bf1e923ca9fec67$exports","$c7ae6dd8608f332b$var$$2f0219f585763ab0$require$Gesture","$c7ae6dd8608f332b$var$$2f0219f585763ab0$require$Point2D","$c7ae6dd8608f332b$var$$2f0219f585763ab0$var$Tap","taps","minDelay","maxDelay","maxRetain","numTaps","elapsed","tdiff","$c7ae6dd8608f332b$var$$2f0219f585763ab0$exports","$c7ae6dd8608f332b$var$$13a50dd07826f9eb$require$Gesture","$c7ae6dd8608f332b$var$$13a50dd07826f9eb$var$Track","tracks","phases","$c7ae6dd8608f332b$exports","Pan","Pinch","Press","Pull","Rotate","Swipe","Swivel","Tap","Track","$2d527d3dfbe18544$var$Interactor","root","handlers","DEFAULT_HANDLERS","_changes","_resetChanges","_scheduled","bindRegions","wheel","pan","coalesce","pinch","swipe","swivel","tap","track","region","delta","_emit","transform","sign","deltaY","$2d527d3dfbe18544$require$NOP","$2d527d3dfbe18544$exports","$81586d39ed578c8f$var$symbols","attachSocketIoListeners","render","$81586d39ed578c8f$var$ClientController","canvas","model","rootElement","eventListeners","eventQueue","renderScheduled","render_fn","resizeCanvasToFillWindow","$81586d39ed578c8f$require$Message","handle","setup","$81586d39ed578c8f$require$NOP","innerHTML","handleCustomEvent","resize","scheduleFn","scheduleRender","$1gsls","$81586d39ed578c8f$require$constants","requestAnimationFrame","draw","forward","dreport","$81586d39ed578c8f$require$DataReporter","iOS","platform","dpr","devicePixelRatio","w","innerWidth","h","innerHeight","resizeToFillWindow","loadClientScripts","loadStylesheets","$81586d39ed578c8f$require$IdStamper","backgroundColor","setupInteractor","scripts","link","rel","setupInputForwarding","forwardTouchEvents","forwardMouseEvents","forwardPointerEvents","forwardBlurEvents","forwardEvents","eventnames","eventname","breport","treport","$81586d39ed578c8f$require$TouchReporter","dispatch","$81586d39ed578c8f$exports","WamsElement","$49a6b9c9f3993e79$exports","$49a6b9c9f3993e79$require$WamsElement","querySelector","classList","setAttributes","attributes","$49a6b9c9f3993e79$require$IdStamper","context","tl","$49a6b9c9f3993e79$require$Point2D","translate","setParent","parent","removeAttributes","attr","WamsImage","$06eb776eda6204d9$exports","$06eb776eda6204d9$require$WamsImage","image","setImage","$06eb776eda6204d9$require$IdStamper","loaded","drawImage","fillStyle","fillRect","restore","img","Image","dispatchEvent","CustomEvent","$06eb776eda6204d9$require$Message","$06eb776eda6204d9$var$createImage","Item","$1e33459129279de6$var$$9a8fdc9f7382f5d6$var$TYPES","METHOD","PROPERTY","$1e33459129279de6$var$$9a8fdc9f7382f5d6$var$Atom","inst","$1e33459129279de6$var$$9a8fdc9f7382f5d6$var$atomOf","execute","$1e33459129279de6$var$$9a8fdc9f7382f5d6$var$CanvasAtom","$1e33459129279de6$var$$9a8fdc9f7382f5d6$exports","$1e33459129279de6$var$$663f930907ca9f24$var$locals","METHODS","PROPERTIES","$1e33459129279de6$var$$663f930907ca9f24$var$symbols","sequence","fromJSON","$1e33459129279de6$var$$663f930907ca9f24$var$CanvasSequence","$1e33459129279de6$var$$663f930907ca9f24$exports","$1e33459129279de6$var$$4fabbdeef1f2d4ae$var$symbols","$1e33459129279de6$var$$4fabbdeef1f2d4ae$exports","build","seq","realArgs","tag","$1e33459129279de6$var$$4fabbdeef1f2d4ae$var$replaceTags","CanvasSequence","CanvasBlueprint","$f346ae80a2055480$exports","$f346ae80a2055480$require$Item","setRender","$f346ae80a2055480$require$IdStamper","$f346ae80a2055480$require$CanvasSequence","colours","View","$36c7439c01b30b99$var$symbols","align","outline","$36c7439c01b30b99$var$ShadowView","$36c7439c01b30b99$require$View","$36c7439c01b30b99$require$IdStamper","globalAlpha","strokeStyle","$36c7439c01b30b99$require$colours","lineWidth","strokeRect","base","beginPath","moveTo","lineTo","$36c7439c01b30b99$exports","removeById","$2671a88abd61b478$var$REQUIRED_DATA","$2671a88abd61b478$exports","itemOrder","addObject","ClassFn","object","addElement","addImage","addItem","addShadow","shadow","$2671a88abd61b478$require$removeById","removeShadow","reverse","config","bringItemToTop","setItemValue","fnName","property","container","updateItem","updateShadow","updateView","detail","$8d2ca656dd61d0cd$var$STATUS_KEYS","$8d2ca656dd61d0cd$var$symbols","drawBackground","drawItems","drawShadows","drawStatus","wipe","$8d2ca656dd61d0cd$var$DEFAULT_CONFIG","showStatus","$8d2ca656dd61d0cd$var$ClientView","$8d2ca656dd61d0cd$require$View","messages","toFixed","ty","setTransform","font","fillText","clearRect","$8d2ca656dd61d0cd$exports","$411b979e0983e126$var$ClientApplication","controller","func","getContext","WAMS"],"version":3,"file":"client.js.map"}